<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.340">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>R Para Ciencia de Datos - 27&nbsp; Comunicar con gráficos</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./29-rmarkdown-formats.html" rel="next">
<link href="./27-rmarkdown.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./26-communicate.html">Comunicar</a></li><li class="breadcrumb-item"><a href="./28-communicate-plots.html"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Comunicar con gráficos</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">R Para Ciencia de Datos</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Bienvenida</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introducción</span></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Explorar</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-explore.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Introducción</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-visualize.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Visualización de datos</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-workflow-basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Flujo de trabajo: conocimientos básicos</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-transform.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Transformación de datos</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-workflow-scripts.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Flujo de trabajo: <em>Scripts</em></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-eda.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Análisis exploratorio de datos (<em>EDA</em>)</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-workflow-projects.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Flujo de trabajo: proyectos</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Manejar o domar datos</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09-wrangle.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Introducción</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10-tibble.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Tibbles</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11-import.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Importación de datos</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12-tidy.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Datos ordenados</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./13-relational-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Datos relacionales</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./14-strings.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Cadenas de caracteres</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./15-factors.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Factores</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./16-datetimes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Fechas y horas</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">Programar</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./17-program.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">(PART) Programar</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./18-pipes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Pipes</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./19-functions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Funciones</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./20-vectors.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Vectores</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./21-iteration.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Iteración</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text">Modelar</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./22-model.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Introducción</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./23-model-basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Modelos: conceptos básicos</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./24-model-building.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Construcción de modelos</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./25-model-many.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Muchos modelos</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
 <span class="menu-text">Comunicar</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./26-communicate.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Introducción</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./27-rmarkdown.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">R Markdown</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./28-communicate-plots.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Comunicar con gráficos</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./29-rmarkdown-formats.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">Formatos de R Markdown</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./30-rmarkdown-workflow.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">Flujo de trabajo en R Markdown</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introducción" id="toc-introducción" class="nav-link active" data-scroll-target="#introducción"><span class="header-section-number">27.1</span> Introducción</a>
  <ul class="collapse">
  <li><a href="#prerrequisitos" id="toc-prerrequisitos" class="nav-link" data-scroll-target="#prerrequisitos"><span class="header-section-number">27.1.1</span> Prerrequisitos</a></li>
  </ul></li>
  <li><a href="#etiquetas" id="toc-etiquetas" class="nav-link" data-scroll-target="#etiquetas"><span class="header-section-number">27.2</span> Etiquetas</a>
  <ul class="collapse">
  <li><a href="#ejercicios" id="toc-ejercicios" class="nav-link" data-scroll-target="#ejercicios"><span class="header-section-number">27.2.1</span> Ejercicios</a></li>
  </ul></li>
  <li><a href="#anotaciones" id="toc-anotaciones" class="nav-link" data-scroll-target="#anotaciones"><span class="header-section-number">27.3</span> Anotaciones</a>
  <ul class="collapse">
  <li><a href="#ejercicios-1" id="toc-ejercicios-1" class="nav-link" data-scroll-target="#ejercicios-1"><span class="header-section-number">27.3.1</span> Ejercicios</a></li>
  </ul></li>
  <li><a href="#escalas" id="toc-escalas" class="nav-link" data-scroll-target="#escalas"><span class="header-section-number">27.4</span> Escalas</a>
  <ul class="collapse">
  <li><a href="#marcas-de-los-ejes-y-leyendas" id="toc-marcas-de-los-ejes-y-leyendas" class="nav-link" data-scroll-target="#marcas-de-los-ejes-y-leyendas"><span class="header-section-number">27.4.1</span> Marcas de los ejes y leyendas</a></li>
  <li><a href="#diseño-de-leyendas" id="toc-diseño-de-leyendas" class="nav-link" data-scroll-target="#diseño-de-leyendas"><span class="header-section-number">27.4.2</span> Diseño de leyendas</a></li>
  <li><a href="#reemplazando-una-escala" id="toc-reemplazando-una-escala" class="nav-link" data-scroll-target="#reemplazando-una-escala"><span class="header-section-number">27.4.3</span> Reemplazando una escala</a></li>
  <li><a href="#ejercicios-2" id="toc-ejercicios-2" class="nav-link" data-scroll-target="#ejercicios-2"><span class="header-section-number">27.4.4</span> Ejercicios</a></li>
  </ul></li>
  <li><a href="#haciendo-zoom" id="toc-haciendo-zoom" class="nav-link" data-scroll-target="#haciendo-zoom"><span class="header-section-number">27.5</span> Haciendo Zoom</a></li>
  <li><a href="#temas" id="toc-temas" class="nav-link" data-scroll-target="#temas"><span class="header-section-number">27.6</span> Temas</a></li>
  <li><a href="#guardando-tus-gráficos" id="toc-guardando-tus-gráficos" class="nav-link" data-scroll-target="#guardando-tus-gráficos"><span class="header-section-number">27.7</span> Guardando tus gráficos</a>
  <ul class="collapse">
  <li><a href="#redimensionar-una-figura" id="toc-redimensionar-una-figura" class="nav-link" data-scroll-target="#redimensionar-una-figura"><span class="header-section-number">27.7.1</span> Redimensionar una figura</a></li>
  <li><a href="#otras-opciones-importantes" id="toc-otras-opciones-importantes" class="nav-link" data-scroll-target="#otras-opciones-importantes"><span class="header-section-number">27.7.2</span> Otras opciones importantes</a></li>
  </ul></li>
  <li><a href="#aprendiendo-más" id="toc-aprendiendo-más" class="nav-link" data-scroll-target="#aprendiendo-más"><span class="header-section-number">27.8</span> Aprendiendo más</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Comunicar con gráficos</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="introducción" class="level2" data-number="27.1">
<h2 data-number="27.1" class="anchored" data-anchor-id="introducción"><span class="header-section-number">27.1</span> Introducción</h2>
<p>En [análisis de datos exploratorios] aprendiste a usar gráficos como herramientas de <em>exploración</em>. Cuando haces gráficos exploratorios, sabes incluso antes de mirar, qué variables mostrará el gráfico. Hiciste cada gráfico con un propósito, lo miraste rápidamente y luego pasaste al siguiente. En el transcurso de la mayoría de los análisis, producirás decenas o cientos de gráficos, muchos de los cuales se desecharán inmediatamente.</p>
<p>Ahora que comprendes tus datos, debes <em>comunicar</em> tu conocimiento a los demás. Es probable que tu audiencia no comparta tus conocimientos previos y no esté profundamente involucrada en los datos. Para ayudar a otros a construir rápidamente un buen modelo mental de los datos, deberás invertir un esfuerzo considerable para que tus gráficos se expliquen por sí solos . En este capítulo, aprenderás algunas de las herramientas que proporciona <strong>ggplot2</strong> para hacerlo.</p>
<p>Este capítulo se centra en las herramientas necesarias para crear buenos gráficos. Supongo que sabes lo que quieres y solo te falta saber cómo hacerlo. Por esa razón, recomiendo combinar este capítulo con un buen libro de visualización general. Me gusta especialmente <a href="https://amzn.com/0321934075"><em>The Truthful Art</em></a>, de Albert Cairo. No enseña la mecánica de crear visualizaciones, sino que se enfoca en lo que necesitas pensar para crear gráficos efectivos.</p>
<section id="prerrequisitos" class="level3" data-number="27.1.1">
<h3 data-number="27.1.1" class="anchored" data-anchor-id="prerrequisitos"><span class="header-section-number">27.1.1</span> Prerrequisitos</h3>
<p>En este capítulo, nos centraremos una vez más en ggplot2. También usaremos un poco el paquete <strong>dplyr</strong> para la manipulación de datos y algunos paquetes como <strong>ggrepel</strong> y <strong>viridis</strong> que extienden las funciones de <strong>ggplot2</strong>. En lugar de cargar esas extensiones aquí, nos referiremos a sus funciones de forma explícita, utilizando la notación <code>::</code> . Esto ayudará a aclarar qué funciones están integradas en ggplot2 y cuáles vienen de otros paquetes. No olvides que deberás instalar esos paquetes con <code>install.packages()</code> si aún no los tienes.</p>
</section>
</section>
<section id="etiquetas" class="level2" data-number="27.2">
<h2 data-number="27.2" class="anchored" data-anchor-id="etiquetas"><span class="header-section-number">27.2</span> Etiquetas</h2>
<p>El punto de inicio más sencillo para convertir un gráfico exploratorio en un gráfico expositivo es con buenas etiquetas. Agrega etiquetas con la función <code>labs()</code>. Este ejemplo agrega un título al gráfico:</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="28-communicate-plots_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>El propósito del título de un gráfico es resumir el hallazgo principal. Evita títulos que simplemente describen el gráfico, por ejemplo “Diagrama de dispersión del desplazamiento del motor frente al ahorro de combustible”.</p>
<p>Si necesitas agregar más texto, hay otras dos etiquetas útiles que puedes usar en <strong>ggplot2</strong> versión 2.2.0 y superiores (que deberían estar disponibles para cuando estés leyendo este libro):</p>
<ul>
<li><p>el <code>subtítulo</code>, del inglés <em>subtitle</em>, agrega detalles adicionales en una fuente más pequeña debajo del título.</p></li>
<li><p>la <code>leyenda</code>, del inglés <em>caption</em>, agrega texto en la parte inferior derecha del gráfico, suele usarse para describir la fuente de los datos.</p></li>
</ul>
<div class="cell">
<div class="cell-output-display">
<p><img src="28-communicate-plots_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>También puedes usar <code>labs()</code> para reemplazar los títulos de ejes y leyendas. Por lo general, es una buena idea reemplazar los nombres cortos de las variables con descripciones más detalladas e incluir las unidades.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="28-communicate-plots_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Es posible usar ecuaciones matemáticas en lugar de cadenas de texto. Simplemente cambia <code>""</code> por <code>quote()</code> y lee acerca de las opciones disponibles en <code>?plotmath</code>:</p>
<div class="cell" data-fig.asp="1">
<div class="cell-output-display">
<p><img src="28-communicate-plots_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" style="width:50.0%"></p>
</div>
</div>
<section id="ejercicios" class="level3" data-number="27.2.1">
<h3 data-number="27.2.1" class="anchored" data-anchor-id="ejercicios"><span class="header-section-number">27.2.1</span> Ejercicios</h3>
<ol type="1">
<li><p>Crea un gráfico partiendo de los datos de economía de combustible con etiquetas para <code>title</code> , <code>subtitle</code>, <code>caption</code>, <code>x</code>, <code>y</code> y <code>color</code> personalizadas.</p></li>
<li><p>La función <code>geom_smooth()</code> es un poco engañosa porque <code>autopista</code> está sesgada positivamente para motores grandes, debido a la inclusión de autos deportivos livianos con motores grandes. Usa tus herramientas de modelado para ajustar y mostrar un modelo mejor.</p></li>
<li><p>Elige un gráfico exploratorio que hayas creado en el último mes y agrégale títulos informativos para volverlo más fácil de comprender para otros.</p></li>
</ol>
</section>
</section>
<section id="anotaciones" class="level2" data-number="27.3">
<h2 data-number="27.3" class="anchored" data-anchor-id="anotaciones"><span class="header-section-number">27.3</span> Anotaciones</h2>
<p>Además de etiquetar las partes principales de tu gráfico, a menudo es útil etiquetar observaciones individuales o grupos de observaciones. La primera herramienta que tienes a tu disposición es <code>geom_text()</code>. La función <code>geom_text()</code> es similar a <code>geom_point()</code>, pero tiene una estética adicional: <code>label</code>. Esto hace posible agregar etiquetas textuales a tus gráficos.</p>
<p>Hay dos posibles fuentes de etiquetas. En primer lugar, es posible tener un tibble que proporcione las etiquetas. El siguiente gráfico no es en sí terriblemente útil, pero si lo es su enfoque: filtrar el auto más eficiente de cada clase con <strong>dplyr</strong>, y luego etiquetarlo en el gráfico:</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="28-communicate-plots_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Esto es difícil de leer porque las etiquetas se superponen entre sí y con los puntos. Podemos mejorar ligeramente las cosas cambiando por <code>geom_label()</code>, que dibuja un rectángulo detrás del texto. También usamos el parámetro <code>nudge_y</code> para mover las etiquetas ligeramente por encima de los puntos correspondientes:</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="28-communicate-plots_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Esto ayuda un poco, pero si te fijas bien en la esquina superior izquierda verás que hay dos etiquetas prácticamente una encima de la otra. Esto sucede porque el kilometraje y el desplazamiento para los mejores automóviles en las categorías de compactos y subcompactos son exactamente los mismos. No hay forma de que podamos solucionar esto aplicando la misma transformación para cada etiqueta. En cambio, podemos usar el paquete <strong>ggrepel</strong> de Kamil Slowikowski. Este paquete es muy útil ya que ajusta automáticamente las etiquetas para que no se superpongan:</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="28-communicate-plots_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Ten en cuenta otra técnica muy práctica utilizada aquí: agregué una segunda capa de puntos grandes y huecos para resaltar los puntos que etiqueté.</p>
<p>A veces puedes usar la misma idea para reemplazar la leyenda con etiquetas colocadas directamente en tu gráfico. Los resultados no son maravillosos para este gráfico en particular, pero tampoco son tan malos. (<code>theme(legend.position = "none"</code>) desactiva la leyenda — hablaremos de ello en breve).</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="28-communicate-plots_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Alternativamente puede que quieras agregar una única etiqueta al gráfico, pero de todas formas necesitarás generar un conjunto de datos. Puede ocurrir que desees ubicar la etiqueta en la esquina del gráfico, en ese caso es conveniente crear un nuevo marco de datos usando <code>summarise()</code> para calcular los valores máximos de x e y.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="28-communicate-plots_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Si deseas colocar el texto exactamente en los bordes del gráfico puedes usar <code>+Inf</code> y <code>-Inf</code>. Como ya no estamos calculando las posiciones de <code>millas</code>, podemos usar <code>tibble()</code> para crear el conjunto de datos:</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="28-communicate-plots_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>En estos ejemplos, separé manualmente la etiqueta en líneas usando “”. Otra posibilidad es usar <code>stringr::str_wrap()</code> para agregar saltos de línea automáticamente, dado el número de caracteres que deseas por línea:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>El aumento del tamaño del motor está
relacionado con la disminución en el
gasto de combustible.</code></pre>
</div>
</div>
<p>Ten en cuenta el uso de <code>hjust</code> y <code>vjust</code> para controlar la alineación de la etiqueta. La figura @ref(fig:just) muestra las nueve combinaciones posibles.</p>
<div class="cell" data-fig.asp="0.5">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="28-communicate-plots_files/figure-html/just-1.png" class="img-fluid figure-img" style="width:60.0%"></p>
<figcaption class="figure-caption">Las nueve combinaciones posibles con <code>hjust</code> y <code>vjust</code>.</figcaption>
</figure>
</div>
</div>
</div>
<p>Recuerda que además de <code>geom_text()</code>, en ggplot2 tienes muchos otros geoms disponibles para ayudar a agregar notas a tu gráfico . Algunas ideas:</p>
<ul>
<li><p>Emplea <code>geom_hline()</code> y <code>geom_vline()</code> para agregar líneas de referencia. A menudo las hago gruesas (<code>size = 2</code>) y blancas (<code>color = white</code>), y las dibujo debajo de la primera capa de datos. Eso las hace fáciles de ver, sin distraer la atención de los datos.</p></li>
<li><p>Emplea <code>geom_rect()</code> para dibujar un rectángulo alrededor de los puntos de interés. Los límites del rectángulo están definidos por las estéticas <code>xmin</code>,<code>xmax</code>, <code>ymin</code>,<code>ymax</code>.</p></li>
<li><p>Emplea <code>geom_segment()</code> con el argumento <code>arrow</code> para destacar un punto en particular con una flecha. Usa la estética <code>x</code> e <code>y</code> para definir la ubicación inicial, y <code>xend</code> y <code>yend</code> para definir la ubicación final.</p></li>
</ul>
<p>¡El único límite es tu imaginación! (y tu paciencia para posicionar las anotaciones de forma estéticamente agradable)</p>
<section id="ejercicios-1" class="level3" data-number="27.3.1">
<h3 data-number="27.3.1" class="anchored" data-anchor-id="ejercicios-1"><span class="header-section-number">27.3.1</span> Ejercicios</h3>
<ol type="1">
<li><p>Usa las infinitas posiciones que permite <code>geom_text()</code> para colocar texto en cada una de las cuatro esquinas del gráfico.</p></li>
<li><p>Lee la documentación de la función <code>annotate()</code>. ¿Cómo puedes usarla para agregar una etiqueta de texto a un gráfico sin tener que crear un tibble?</p></li>
<li><p>¿Cómo interactúan las etiquetas producidas por <code>geom_text()</code> con la separación en facetas? ¿Cómo puedes agregar una etiqueta a una sola faceta? ¿Cómo puedes poner una etiqueta diferente en cada faceta? (Sugerencia: piensa en los datos subyacentes).</p></li>
<li><p>¿Qué argumentos para <code>geom_label()</code> controlan la apariencia de la caja que se ve atrás?</p></li>
<li><p>¿Cuáles son los cuatro argumentos de <code>arrow()</code>? ¿Cómo funcionan? Crea una serie de gráficos que demuestren las opciones más importantes.</p></li>
</ol>
</section>
</section>
<section id="escalas" class="level2" data-number="27.4">
<h2 data-number="27.4" class="anchored" data-anchor-id="escalas"><span class="header-section-number">27.4</span> Escalas</h2>
<p>La tercera forma en que puedes mejorar tu gráfico para comunicar es ajustar las escalas. Las escalas controla el mapeo de los valores de los datos a cosas que puedes percibir. Normalmente, <strong>ggplot2</strong> agrega escalas automáticamente. Por ejemplo, cuando tipeas:</p>
<p><strong>ggplot2</strong> agrega automáticamente escalas predeterminadas detrás de escena:</p>
<p>Ten en cuenta que los nombres de las escalas comienzan siempre igual: <code>scale_</code> seguido del nombre de la estética, luego <code>_</code> y finalmente el nombre de la escala. Las escalas predeterminadas se nombran según el tipo de variable con la que se alinean: continua, discreta, fecha y hora (datetime) o fecha. Hay muchas escalas no predeterminadas que aprenderás a continuación.</p>
<p>Las escalas predeterminadas se han elegido cuidadosamente para ser adecuadas para una gama amplia de valores. Sin embargo, es posible que desees sobrescribir los valores predeterminados por dos razones:</p>
<ul>
<li><p>Es posible que desees modificar algunos de los parámetros de la escala predeterminada. Esto te permite hacer cosas como cambiar los intervalos de valores en los ejes o las etiquetas de cada valor visible.</p></li>
<li><p>Es posible que desees reemplazar la escala por completo, y utilizar un algoritmo completamente diferente. Por lo general tu opción será mejor que la predeterminada ya que sabes más acerca de los datos.</p></li>
</ul>
<section id="marcas-de-los-ejes-y-leyendas" class="level3" data-number="27.4.1">
<h3 data-number="27.4.1" class="anchored" data-anchor-id="marcas-de-los-ejes-y-leyendas"><span class="header-section-number">27.4.1</span> Marcas de los ejes y leyendas</h3>
<p>Hay dos argumentos principales que afectan la apariencia de las marcas, del inglés <em>ticks</em>, en los ejes y las leyendas:<code>breaks</code> y <code>labels</code>, del inglés <em>quiebre</em> y <em>etiqueta</em> respectivamente. Los <code>breaks</code> controlan la posición de las marcas en los ejes o los valores asociados con las leyendas. Las <code>labels</code> controlan la etiqueta de texto asociada con cada marca/leyenda. El uso más común de los <code>breaks</code> es redefinir la opción predeterminada:</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="28-communicate-plots_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Puedes usar <code>labels</code> de la misma manera (un vector de caracteres de la misma longitud que <code>breaks</code>), o puedes establecerlas como <code>NULL</code> del inglés <em>nulo</em>, para suprimir las etiquetas por completo. Esto es útil para mapas, o para publicar gráficos donde no puedes compartir los números absolutos.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="28-communicate-plots_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>También puedes usar <code>breaks</code> y <code>labels</code> para controlar la apariencia de las leyendas. En conjunto, los ejes y las leyendas se llaman <strong>guías</strong>. Los ejes se usan para la estética de x e y; las leyendas se usan para todo lo demás.</p>
<p>Otro uso de los <code>breaks</code> es cuando tienes relativamente pocos puntos de datos y deseas resaltar exactamente dónde se producen las observaciones. Como ejemplo, el siguiente gráfico muestra cuándo comenzó y terminó su mandato cada presidente de los Estados Unidos.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="28-communicate-plots_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Ten en cuenta que la especificación de <code>breaks</code> y <code>labels</code> para escalas en formato de fecha y fecha y hora es ligeramente diferente:</p>
<ul>
<li><p><code>date_labels</code> toma en cuenta la especificación de formato, en la misma forma que <code>parse_datetime()</code>.</p></li>
<li><p><code>date_breaks</code> (no se muestra aquí), toma una cadena como “2 días” o “1 mes”.</p></li>
</ul>
</section>
<section id="diseño-de-leyendas" class="level3" data-number="27.4.2">
<h3 data-number="27.4.2" class="anchored" data-anchor-id="diseño-de-leyendas"><span class="header-section-number">27.4.2</span> Diseño de leyendas</h3>
<p>Con mayor frecuencia utilizarás <code>breaks</code> y <code>labels</code> para ajustar los ejes. Aunque ambos también funcionan con leyendas, hay algunas otras técnicas que podrías usar.</p>
<p>Para controlar la posición general de la leyenda, debes usar una configuración de <code>theme()</code> del inglés <em>tema</em>. Volveremos a los <em>temas</em> al final del capítulo, pero en resumen, controlan las partes del gráfico que no son de datos. La configuración del tema <code>legend.position</code> del inglés <em>posición de la leyenda</em>, controla dónde se dibuja la leyenda:</p>
<div class="cell" data-fig.asp="1">
<div class="cell-output-display">
<p><img src="28-communicate-plots_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid" style="width:50.0%"></p>
</div>
<div class="cell-output-display">
<p><img src="28-communicate-plots_files/figure-html/unnamed-chunk-17-2.png" class="img-fluid" style="width:50.0%"></p>
</div>
<div class="cell-output-display">
<p><img src="28-communicate-plots_files/figure-html/unnamed-chunk-17-3.png" class="img-fluid" style="width:50.0%"></p>
</div>
<div class="cell-output-display">
<p><img src="28-communicate-plots_files/figure-html/unnamed-chunk-17-4.png" class="img-fluid" style="width:50.0%"></p>
</div>
</div>
<p>También puedes usar <code>legend.position = "none"</code> para suprimir por completo la visualización de la leyenda.</p>
<p>Para controlar la visualización de leyendas individuales, usa <code>guides()</code> junto con <code>guide_legend()</code> o <code>guide_colourbar()</code>. El siguiente ejemplo muestra dos configuraciones importantes: controlar el número de filas que usa la leyenda con <code>nrow</code>, y redefinir una de las estéticas para agrandar los puntos. Esto es particularmente útil si has usado un valor de <code>alfa</code> bajo para mostrar muchos puntos en un diagrama.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="28-communicate-plots_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="reemplazando-una-escala" class="level3" data-number="27.4.3">
<h3 data-number="27.4.3" class="anchored" data-anchor-id="reemplazando-una-escala"><span class="header-section-number">27.4.3</span> Reemplazando una escala</h3>
<p>En lugar de simplemente modificar un poco los detalles, puedes reemplazar la escala por completo. Hay dos tipos de escalas que es probable que desees cambiar: escalas de posición continua y escalas de color. Afortunadamente, los mismos principios se aplican a todos los demás aspectos estéticos, por lo que una vez que hayas dominado la posición y el color serás capaz de realizar rápidamente otros reemplazos de escala.</p>
<p>Esto es muy útil para graficar transformaciones de tu variable. A modo de ejemplo, como hemos visto en <a href="diamond-prices">diamond prices</a>, es más fácil ver la relación precisa entre <code>quilate</code> y <code>precio</code> si aplicamos una transformación logarítmica en base 10:</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="28-communicate-plots_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid" style="width:50.0%"></p>
</div>
<div class="cell-output-display">
<p><img src="28-communicate-plots_files/figure-html/unnamed-chunk-19-2.png" class="img-fluid" style="width:50.0%"></p>
</div>
</div>
<p>Sin embargo, la desventaja de esta transformación es que los ejes ahora están etiquetados con los valores transformados, por lo que se vuelve difícil interpretar el gráfico. En lugar de hacer la transformación en el mapeo estético, podemos hacerlo con la escala. Esto es visualmente idéntico, excepto que los ejes están etiquetados en la escala original de los datos.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="28-communicate-plots_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Otra escala que se personaliza con frecuencia es el color. La escala categórica predeterminada selecciona los colores que están espaciados uniformemente alrededor del círculo cromático. Otras alternativas útiles son las escalas de ColorBrewer que han sido ajustadas manualmente para que funcionen mejor para personas con tipos comunes de daltonismo. Los dos gráficos de abajo se ven similares, sin embargo hay suficiente diferencia en los tonos rojo y verde tal que los puntos de la derecha pueden distinguirse incluso por personas con daltonismo rojo-verde.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="28-communicate-plots_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid" style="width:50.0%"></p>
</div>
<div class="cell-output-display">
<p><img src="28-communicate-plots_files/figure-html/unnamed-chunk-21-2.png" class="img-fluid" style="width:50.0%"></p>
</div>
</div>
<p>No olvides las técnicas más simples. Si solo hay unos pocos colores, puedes agregar un mapeo de forma redundante. Esto también ayudará a asegurar que tu gráfico sea interpretable en blanco y negro.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="28-communicate-plots_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Las escalas de ColorBrewer están documentadas en línea en <a href="http://colorbrewer2.org/" class="uri">http://colorbrewer2.org/</a> y están disponibles en R en el paquete <strong>RColorBrewer</strong> de Erich Neuwirth. La figura @ref(fig:brewer) muestra la lista completa de paletas de colores disponibles. Las paletas secuenciales (arriba) y divergentes (abajo) son particularmente útiles si sus valores categóricos están ordenados o tienen un “centro”. Esto a menudo ocurre si has utilizado <code>cut()</code> para convertir una variable continua en una variable categórica.</p>
<div class="cell" data-fig.asp="2.5">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="28-communicate-plots_files/figure-html/brewer-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Todas las escalas ColorBrewer.</figcaption>
</figure>
</div>
</div>
</div>
<p>Cuando tengas un mapeo predefinido entre valores y colores, usa <code>scale_colour_manual()</code>. Por ejemplo, si mapeamos los partidos presidenciales de Estados Unidos en color, queremos usar el mapeo estándar de color rojo para republicanos y azul para demócratas:</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="28-communicate-plots_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Para generar una escala de color para variables continuas , puedes usar <code>built in scale_colour_gradient()</code> o <code>scale_fill_gradient()</code>. Si tienes una escala divergente, puedes usar <code>scale_colour_gradient2()</code>. Eso tepermite dar, por ejemplo, diferentes colores a valores positivos y negativos. Esto a veces también es útil si quieres distinguir puntos por encima o por debajo de la media.</p>
<p>Otra opción es <code>scale_colour_viridis()</code> proporcionada por el paquete <strong>viridis</strong>. Es un análogo continuo de las escalas categóricas de ColorBrewer. Los diseñadores, Nathaniel Smith y Stéfan van der Walt, adaptaron cuidadosamente una paleta de color para variables continuas que tiene buenas propiedades perceptuales. Aquí hay un ejemplo de viridis:</p>
<div class="cell" data-fig.asp="1">
<div class="cell-output-display">
<p><img src="28-communicate-plots_files/figure-html/unnamed-chunk-24-1.png" class="img-fluid" style="width:50.0%"></p>
</div>
<div class="cell-output-display">
<p><img src="28-communicate-plots_files/figure-html/unnamed-chunk-24-2.png" class="img-fluid" style="width:50.0%"></p>
</div>
</div>
<p>Ten en cuenta que todas las escalas de color vienen en dos variedades: <code>scale_colour_x()</code> y <code>scale_fill_x()</code> para la estética <code>color</code> y <code>fill</code>, respectivamente (las escalas de color se expresan tanto en inglés americano como británico).</p>
</section>
<section id="ejercicios-2" class="level3" data-number="27.4.4">
<h3 data-number="27.4.4" class="anchored" data-anchor-id="ejercicios-2"><span class="header-section-number">27.4.4</span> Ejercicios</h3>
<ol type="1">
<li>¿Por qué el siguiente código no reemplaza la escala predeterminada?</li>
</ol>
<p>::: {.cell}</p>
<p>:::</p>
<ol start="2" type="1">
<li><p>¿Cuál es el primer argumento para cada escala? ¿Cómo se compara con <code>labs()</code>?</p></li>
<li><p>Cambia la visualización de los términos presidenciales de las siguientes maneras:</p></li>
</ol>
<ol type="I">
<li>Combinando las dos variantes que se muestran arriba.</li>
<li>Mejorando la visualización del eje y.</li>
<li>Etiquetando cada término con el nombre del presidente.</li>
<li>Agregandoetiquetas informativas al gráfico.</li>
<li>Poniendo intervalos de 4 años (¡esto es más complicado de lo que parece!).</li>
</ol>
<ol start="4" type="1">
<li>Utiliza <code>override.aes</code> para que la leyenda en el siguiente gráfico sea más fácil de ver:</li>
</ol>
<p>::: {.cell} ::: {.cell-output-display} <img src="28-communicate-plots_files/figure-html/unnamed-chunk-26-1.png" class="img-fluid" style="width:50.0%"> ::: :::</p>
</section>
</section>
<section id="haciendo-zoom" class="level2" data-number="27.5">
<h2 data-number="27.5" class="anchored" data-anchor-id="haciendo-zoom"><span class="header-section-number">27.5</span> Haciendo Zoom</h2>
<p>Hay tres formas de controlar los límites de un gráfico:</p>
<ol type="1">
<li>Modificando los datos que se grafican</li>
<li>Estableciendo los límites en cada escala</li>
<li>Estableciendo <code>xlim</code> y <code>ylim</code> en <code>coord_cartesian()</code></li>
</ol>
<p>Para ampliar una región del gráfico, generalmente es mejor usar <code>coord_cartesian()</code>.Compara los siguientes dos gráficos:</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="28-communicate-plots_files/figure-html/unnamed-chunk-27-1.png" class="img-fluid" style="width:50.0%"></p>
</div>
<div class="cell-output-display">
<p><img src="28-communicate-plots_files/figure-html/unnamed-chunk-27-2.png" class="img-fluid" style="width:50.0%"></p>
</div>
</div>
<p>También puedes establecer <code>limits</code> del inglés <em>límites</em> en escalas individuales. La reducción de los límites del gráfico es equivalente a seleccionar un subconjunto de los datos. En general es más útil si deseas <em>expandir</em> los límites, por ejemplo, cuando quieres hacer coincidir escalas de diferentes gráficos. A modo de ejemplo, si extraemos dos clases de automóviles y los graficamos por separado, son difíciles de comparar ya que las tres escalas (el eje x, el eje y y la estética del color) tienen rangos diferentes.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="28-communicate-plots_files/figure-html/unnamed-chunk-28-1.png" class="img-fluid" style="width:50.0%"></p>
</div>
<div class="cell-output-display">
<p><img src="28-communicate-plots_files/figure-html/unnamed-chunk-28-2.png" class="img-fluid" style="width:50.0%"></p>
</div>
</div>
<p>Una forma de superar este problema es compartir la escala entre varios gráficos, estableciendo una escala única a partir de los límites del conjunto de datos completo.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="28-communicate-plots_files/figure-html/unnamed-chunk-29-1.png" class="img-fluid" style="width:50.0%"></p>
</div>
<div class="cell-output-display">
<p><img src="28-communicate-plots_files/figure-html/unnamed-chunk-29-2.png" class="img-fluid" style="width:50.0%"></p>
</div>
</div>
<p>En este caso particular podrías haber simplemente empleado la separación en facetas, pero esta técnica es más útil en general, por ejemplo, si deseas realizar gráficos en varias páginas de un informe.</p>
</section>
<section id="temas" class="level2" data-number="27.6">
<h2 data-number="27.6" class="anchored" data-anchor-id="temas"><span class="header-section-number">27.6</span> Temas</h2>
<p>Finalmente, puedes personalizar los elementos de tu gráfico que no son datos aplicando un tema:</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="28-communicate-plots_files/figure-html/unnamed-chunk-30-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p><strong>ggplot2</strong> incluye ocho temas por defecto, como se muestra en la Figura @ref(fig:themes). Muchos otros están incluidos en paquetes adicionales como <strong>ggthemes</strong> (<a href="https://github.com/jrnold/ggthemes" class="uri">https://github.com/jrnold/ggthemes</a>), de Jeffrey Arnold.</p>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/visualization-themes.png" class="img-fluid figure-img" width="1600"></p>
<figcaption class="figure-caption">The eight themes built-in to ggplot2.</figcaption>
</figure>
</div>
</div>
</div>
<p>Muchas personas se preguntan por qué el tema predeterminado tiene un fondo gris. Esta fue una elección deliberada ya que el fondo gris pone los datos por delante mientras siguen siendo visibles las líneas de la cuadrícula. Las líneas blancas de la cuadrícula son visibles (lo cual es importante porque ayudan significativamente a evaluar la posición), pero tienen poco impacto visual y son fáciles de eliminar. El fondo gris le da a al gráfico un color tipográfico similar al del texto, asegurando que los gráficos encajen con el flujo de un documento sin saltar con un fondo blanco brillante. Finalmente, el fondo gris crea un campo continuo de color que asegura que el gráfico se perciba como una sola entidad visual.</p>
<p>También es posible controlar componentes individuales de cada tema, como el tamaño y el color de la fuente utilizada para el eje y. Desafortunadamente, este nivel de detalle está fuera del alcance de este libro, por lo que deberás leer el libro <a href="https://amzn.com/331924275X">ggplot2 book</a> para obtener todos los detalles. También puedes crear tus propios temas, si estás tratando de hacer coincidir un estilo corporativo o de revista en particular.</p>
</section>
<section id="guardando-tus-gráficos" class="level2" data-number="27.7">
<h2 data-number="27.7" class="anchored" data-anchor-id="guardando-tus-gráficos"><span class="header-section-number">27.7</span> Guardando tus gráficos</h2>
<p>Hay dos formas principales de obtener tus gráficos desde R: <code>ggsave()</code> y <code>knitr. ggsave()</code> guardarán el gráfico más reciente en el disco.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="28-communicate-plots_files/figure-html/unnamed-chunk-31-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Si no especificas <code>width</code> y <code>height</code>, del inglés el <em>ancho</em> y el <em>alto</em>, se usarán las dimensiones del dispositivo empleado para graficar. Para que el código sea reproducible, necesitarás especificarlos.</p>
<p>En general, sin embargo, creo que deberías armar tus informes finales utilizando R Markdown, por lo que quiero centrarme en las opciones importantes para los bloques de código que debes conocer para graficar. Puedes obtener más información sobre <code>ggsave()</code> en la documentación.</p>
<section id="redimensionar-una-figura" class="level3" data-number="27.7.1">
<h3 data-number="27.7.1" class="anchored" data-anchor-id="redimensionar-una-figura"><span class="header-section-number">27.7.1</span> Redimensionar una figura</h3>
<p>El mayor desafío de los gráficos en R Markdown es conseguir que tus figuras tengan el tamaño y la forma correctos. Hay cinco opciones principales que controlan el tamaño de la figura: <code>fig.width</code>, <code>fig.height</code>, <code>fig.asp</code>, <code>out.width</code> y <code>out.height</code>. El tamaño de la imagen es un desafío porque hay dos tamaños (el tamaño de la figura creada por R y el tamaño al que se inserta en el documento de salida) y varias formas de especificarlo (es decir, altura, ancho y relación de aspecto: elige dos de tres).</p>
<p>Solo uso tres de las cinco opciones:</p>
<ul>
<li><p>Encuentro estéticamente más agradable que los gráficos tengan un ancho consistente. Para hacer cumplir esto, configuro <code>fig.width = 6</code> (6 “) y <code>fig.asp = 0.618</code> (la proporción áurea) en los valores predeterminados. Luego, en bloques individuales, solo ajusto <code>fig.asp</code>.</p></li>
<li><p>Controlo el tamaño de salida con <code>out.width</code> y lo configuro a un porcentaje del ancho de línea). De manera predeterminada, <code>out.width = "70%"</code> y <code>fig.align = "center"</code>. Eso le da a los gráficos cierto espacio para respirar, sin ocupar demasiado espacio.</p></li>
<li><p>Para poner múltiples gráficos en una sola fila, establezco <code>out.width en 50%</code> para dos gráficos, <code>33%</code> en 3 gráficos, o <code>25%</code> en 4 gráficos, y <code>setfig.align = "default"</code>. Dependiendo de lo que intento ilustrar (por ejemplo, mostrar datos o variacionesdel gráfico), también modificaré <code>fig.width</code> cómo se explica a continuación.</p></li>
</ul>
<p>Si observas que tienes que entrecerrar los ojos para leer el texto de tu gráfico, debes ajustar <code>fig.width</code>. Si <code>fig.width</code> es mayor que el tamaño de la figura en el documento final, el texto será demasiado pequeño; si <code>fig.width</code> es más pequeño, el texto será demasiado grande. A menudo necesitarás experimentar un poco para calcular la proporción correcta entre <code>fig.width</code> y el ancho asociado en tu documento. Para ilustrar el principio, los siguientes tres gráficos tienen <code>fig.width</code> de 4, 6 y 8, respectivamente:</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="28-communicate-plots_files/figure-html/unnamed-chunk-34-1.png" class="img-fluid" width="384"></p>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<p><img src="28-communicate-plots_files/figure-html/unnamed-chunk-35-1.png" class="img-fluid" width="576"></p>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<p><img src="28-communicate-plots_files/figure-html/unnamed-chunk-36-1.png" class="img-fluid" width="768"></p>
</div>
</div>
<p>Si deseas asegurarte que el tamaño de fuente es el mismo en todas tus figuras, al establecer <code>out.width</code>, también necesitarás ajustar <code>fig.width</code> para mantener la misma proporción en relación al <code>out.width</code> predeterminado. Por ejemplo, si tu valor predeterminado de <code>fig.width</code> es 6 y <code>out.width</code> es 0.7, cuando establezcas <code>out.width = "50%"</code> necesitarás establecer <code>fig.width</code> a 4.3 (6 * 0.5 / 0.7).</p>
</section>
<section id="otras-opciones-importantes" class="level3" data-number="27.7.2">
<h3 data-number="27.7.2" class="anchored" data-anchor-id="otras-opciones-importantes"><span class="header-section-number">27.7.2</span> Otras opciones importantes</h3>
<p>Al mezclar código y texto, como hago en este libro, recomiendo configurar <code>fig.show = "hold"</code> para que los gráficos se muestren después del código. Esto tiene el agradable efecto secundario de obligarte a dividir grandes bloques de código con sus explicaciones.</p>
<p>Para agregar un título al gráfico, usa <code>fig.cap</code>. En R Markdown esto cambiará la figura de “inline” a “floating”.</p>
<p>Si estás produciendo resultados en formato PDF, el tipo de gráficos predeterminado es PDF. Esta es una buena configuración predeterminada porque los PDF son gráficos vectoriales de alta calidad. Sin embargo, pueden generar gráficos muy grandes y lentos si muestras miles de puntos. En ese caso, configura <code>dev = "png"</code> para forzar el uso de PNG. Son de calidad ligeramente inferior, pero serán mucho más compactos.</p>
<p>Es una buena idea darles nombres a los bloques de código que producen figuras, incluso si no etiquetas rutinariamente otros bloques. Etiquetar el bloque se utiliza para generar el nombre de archivo del gráfico en el disco, por lo que darle un nombre a los bloques hace que sea mucho más fácil seleccionar gráficas y reutilizarlas en otras circunstancias (por ejemplo, si deseas colocar rápidamente un solo gráfico en un correo electrónico o un tweet).</p>
</section>
</section>
<section id="aprendiendo-más" class="level2" data-number="27.8">
<h2 data-number="27.8" class="anchored" data-anchor-id="aprendiendo-más"><span class="header-section-number">27.8</span> Aprendiendo más</h2>
<p>El mejor lugar para aprender más es el libro de ggplot2: <a href="https://amzn.com/331924275X"><em>ggplot2: Elegant graphics for data analysis</em></a>. Este explica con mucha más profundidad la teoría subyacente y tiene muchos más ejemplos de cómo combinar las piezas individuales para resolver problemas prácticos. Desafortunadamente, el libro no está disponible en línea de forma gratuita, aunque puede encontrar el código fuente en <a href="https://github.com/hadley/ggplot2-book" class="uri">https://github.com/hadley/ggplot2-book</a>.</p>
<p>Otro gran recurso es la guía de extensiones ggplot2 <a href="https://exts.ggplot2.tidyverse.org/gallery/" class="uri">https://exts.ggplot2.tidyverse.org/gallery/</a>. Este sitio enumera muchos de los paquetes que amplían <strong>ggplot2</strong> con nuevos geoms y escalas. Es un buen lugar para comenzar si tratas de hacer algo que parece difícil con <strong>ggplot2</strong>.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./27-rmarkdown.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">R Markdown</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./29-rmarkdown-formats.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">Formatos de R Markdown</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>