<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.361">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>R Para Ciencia de Datos - 14&nbsp; Cadenas de caracteres</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./15-factors.html" rel="next">
<link href="./13-relational-data.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./09-wrangle.html">Manejar o domar datos</a></li><li class="breadcrumb-item"><a href="./14-strings.html"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Cadenas de caracteres</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">R Para Ciencia de Datos</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Bienvenida</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introducción</span></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Explorar</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-explore.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Introducción</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-visualize.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Visualización de datos</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-workflow-basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Flujo de trabajo: conocimientos básicos</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-transform.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Transformación de datos</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-workflow-scripts.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Flujo de trabajo: Scripts</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-eda.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Análisis exploratorio de datos (EDA)</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-workflow-projects.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Flujo de trabajo: proyectos</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Manejar o domar datos</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09-wrangle.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Introducción</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10-tibble.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Tibbles</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11-import.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Importación de datos</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12-tidy.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Datos ordenados</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./13-relational-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Datos relacionales</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./14-strings.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Cadenas de caracteres</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./15-factors.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Factores</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./16-datetimes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Fechas y horas</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">Programar</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./17-program.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Introducción</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./18-pipes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Pipes</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./19-functions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Funciones</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./20-vectors.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Vectores</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./21-iteration.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Iteración</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text">Modelar</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./22-model.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Introducción</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./23-model-basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Modelos: conceptos básicos</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./24-model-building.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Construcción de modelos</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./25-model-many.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Muchos modelos</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
 <span class="menu-text">Comunicar</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./26-communicate.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Introducción</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./27-rmarkdown.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">R Markdown</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./28-communicate-plots.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">Comunicar con gráficos</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./29-rmarkdown-formats.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">Formatos de R Markdown</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./30-rmarkdown-workflow.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">Flujo de trabajo en R Markdown</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introducción" id="toc-introducción" class="nav-link active" data-scroll-target="#introducción"><span class="header-section-number">14.1</span> Introducción</a>
  <ul class="collapse">
  <li><a href="#prerequisitos" id="toc-prerequisitos" class="nav-link" data-scroll-target="#prerequisitos"><span class="header-section-number">14.1.1</span> Prerequisitos</a></li>
  </ul></li>
  <li><a href="#cadenas-elementos-básicos" id="toc-cadenas-elementos-básicos" class="nav-link" data-scroll-target="#cadenas-elementos-básicos"><span class="header-section-number">14.2</span> Cadenas: elementos básicos</a>
  <ul class="collapse">
  <li><a href="#largo-de-cadena" id="toc-largo-de-cadena" class="nav-link" data-scroll-target="#largo-de-cadena"><span class="header-section-number">14.2.1</span> Largo de cadena</a></li>
  <li><a href="#combinar-cadenas" id="toc-combinar-cadenas" class="nav-link" data-scroll-target="#combinar-cadenas"><span class="header-section-number">14.2.2</span> Combinar cadenas</a></li>
  <li><a href="#dividir-cadenas" id="toc-dividir-cadenas" class="nav-link" data-scroll-target="#dividir-cadenas"><span class="header-section-number">14.2.3</span> Dividir cadenas</a></li>
  <li><a href="#locales" id="toc-locales" class="nav-link" data-scroll-target="#locales"><span class="header-section-number">14.2.4</span> <em>Locales</em></a></li>
  <li><a href="#ejercicios" id="toc-ejercicios" class="nav-link" data-scroll-target="#ejercicios"><span class="header-section-number">14.2.5</span> Ejercicios</a></li>
  <li><a href="#buscar-coincidencia-de-patrones-con-expresiones-regulares" id="toc-buscar-coincidencia-de-patrones-con-expresiones-regulares" class="nav-link" data-scroll-target="#buscar-coincidencia-de-patrones-con-expresiones-regulares"><span class="header-section-number">14.2.6</span> Buscar coincidencia de patrones con expresiones regulares</a></li>
  <li><a href="#coincidencias-básicas" id="toc-coincidencias-básicas" class="nav-link" data-scroll-target="#coincidencias-básicas"><span class="header-section-number">14.2.7</span> Coincidencias básicas</a></li>
  <li><a href="#anclas" id="toc-anclas" class="nav-link" data-scroll-target="#anclas"><span class="header-section-number">14.2.8</span> Anclas</a></li>
  <li><a href="#clases-de-caracteres-y-alternativas" id="toc-clases-de-caracteres-y-alternativas" class="nav-link" data-scroll-target="#clases-de-caracteres-y-alternativas"><span class="header-section-number">14.2.9</span> Clases de caracteres y alternativas</a></li>
  <li><a href="#repetición" id="toc-repetición" class="nav-link" data-scroll-target="#repetición"><span class="header-section-number">14.2.10</span> Repetición</a></li>
  <li><a href="#agrupamiento-y-referencias-previas" id="toc-agrupamiento-y-referencias-previas" class="nav-link" data-scroll-target="#agrupamiento-y-referencias-previas"><span class="header-section-number">14.2.11</span> Agrupamiento y referencias previas</a></li>
  </ul></li>
  <li><a href="#herramientas" id="toc-herramientas" class="nav-link" data-scroll-target="#herramientas"><span class="header-section-number">14.3</span> Herramientas</a>
  <ul class="collapse">
  <li><a href="#detectar-coincidencias" id="toc-detectar-coincidencias" class="nav-link" data-scroll-target="#detectar-coincidencias"><span class="header-section-number">14.3.1</span> Detectar coincidencias</a></li>
  <li><a href="#ejercicios-6" id="toc-ejercicios-6" class="nav-link" data-scroll-target="#ejercicios-6"><span class="header-section-number">14.3.2</span> Ejercicios</a></li>
  <li><a href="#extraer-coincidencias" id="toc-extraer-coincidencias" class="nav-link" data-scroll-target="#extraer-coincidencias"><span class="header-section-number">14.3.3</span> Extraer coincidencias</a></li>
  <li><a href="#coincidencias-agrupadas" id="toc-coincidencias-agrupadas" class="nav-link" data-scroll-target="#coincidencias-agrupadas"><span class="header-section-number">14.3.4</span> Coincidencias agrupadas</a></li>
  <li><a href="#remplazar-coincidencias" id="toc-remplazar-coincidencias" class="nav-link" data-scroll-target="#remplazar-coincidencias"><span class="header-section-number">14.3.5</span> Remplazar coincidencias</a></li>
  <li><a href="#divisiones" id="toc-divisiones" class="nav-link" data-scroll-target="#divisiones"><span class="header-section-number">14.3.6</span> Divisiones</a></li>
  <li><a href="#buscar-coincidencias" id="toc-buscar-coincidencias" class="nav-link" data-scroll-target="#buscar-coincidencias"><span class="header-section-number">14.3.7</span> Buscar coincidencias</a></li>
  </ul></li>
  <li><a href="#otro-tipo-de-patrones" id="toc-otro-tipo-de-patrones" class="nav-link" data-scroll-target="#otro-tipo-de-patrones"><span class="header-section-number">14.4</span> Otro tipo de patrones</a>
  <ul class="collapse">
  <li><a href="#ejercicios-11" id="toc-ejercicios-11" class="nav-link" data-scroll-target="#ejercicios-11"><span class="header-section-number">14.4.1</span> Ejercicios</a></li>
  </ul></li>
  <li><a href="#otros-usos-de-las-expresiones-regulares." id="toc-otros-usos-de-las-expresiones-regulares." class="nav-link" data-scroll-target="#otros-usos-de-las-expresiones-regulares."><span class="header-section-number">14.5</span> Otros usos de las expresiones regulares.</a></li>
  <li><a href="#stringi" id="toc-stringi" class="nav-link" data-scroll-target="#stringi"><span class="header-section-number">14.6</span> stringi</a>
  <ul class="collapse">
  <li><a href="#ejercicios-12" id="toc-ejercicios-12" class="nav-link" data-scroll-target="#ejercicios-12"><span class="header-section-number">14.6.1</span> Ejercicios</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Cadenas de caracteres</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="introducción" class="level2" data-number="14.1">
<h2 data-number="14.1" class="anchored" data-anchor-id="introducción"><span class="header-section-number">14.1</span> Introducción</h2>
<p>Este capítulo te introduce en la manipulación de cadenas de caracteres en R. Si bien aprenderás los aspectos básicos acerca de cómo funcionan y cómo crearlas a mano, el foco del capítulo estará puesto en las expresiones regulares (o <em>regex</em>). Como las cadenas de caracteres suelen contener datos no estructurados o semiestructurados, las expresiones regulares resultan útiles porque permiten describir patrones en ellas a través de un lenguaje conciso. Cuando mires por primera vez una expresión regular te parecerá que un gato caminó sobre tu teclado, pero a medida que vayas ampliando tu conocimiento pronto te empezarán a hacer sentido.</p>
<section id="prerequisitos" class="level3" data-number="14.1.1">
<h3 data-number="14.1.1" class="anchored" data-anchor-id="prerequisitos"><span class="header-section-number">14.1.1</span> Prerequisitos</h3>
<p>Este capítulo se enfocará en el paquete para manipulación de cadenas llamado <strong>stringr</strong> (del inglés <em>string</em>, cadena), que es parte del Tidyverse.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(datos)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="cadenas-elementos-básicos" class="level2" data-number="14.2">
<h2 data-number="14.2" class="anchored" data-anchor-id="cadenas-elementos-básicos"><span class="header-section-number">14.2</span> Cadenas: elementos básicos</h2>
<p>Puedes crear una cadena utilizando comillas simples o dobles. A diferencia de otros lenguajes, no hay diferencias en su comportamiento. Nuestra recomendación es siempre utilizar <code>"</code>, a menos que quieras crear una cadena que contenga múltiples <code>"</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>string1 <span class="ot">&lt;-</span> <span class="st">"Esta es una cadena de caracteres"</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>string2 <span class="ot">&lt;-</span> <span class="st">'Si quiero incluir "comillas" dentro de la cadena, uso comillas simples'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Si olvidas cerrar las comillas, verás un <code>+</code> en la consola, que es el signo de continuación para indicar que el código no está completo:</p>
<pre><code>&gt; "Esta es una cadena de caracteres sin comillas de cierre
+ 
+ 
+ AYUDA, ESTOY ATASCADO</code></pre>
<p>Si esto te ocurre, ¡presiona la tecla <em>Escape</em> e inténtalo de nuevo!</p>
<p>Para incluir comillas simples o dobles de manera literal en una cadena puedes utilizar <code>\</code> para “escaparlas” (“escapar” viene de la tecla <em>escape</em>):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>comilla_doble <span class="ot">&lt;-</span> <span class="st">"</span><span class="sc">\"</span><span class="st">"</span> <span class="co"># o '"'</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>comilla_simple <span class="ot">&lt;-</span> <span class="st">'</span><span class="sc">\'</span><span class="st">'</span> <span class="co"># o "'"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Esto quiere decir que si quieres incluir una barra invertida, necesitas duplicarla: <code>"\\"</code>.</p>
<p>Ten cuidado con el hecho de que la representación impresa de una cadena no es equivalente a la cadena misma, ya que la representación muestra las barras utilizadas para “escapar” caracteres, es decir, para sean interpretados en su sentido literal, no como caracteres especiales. Para ver el contenido en bruto de una cadena utiliza <code>writeLines()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"</span><span class="sc">\"</span><span class="st">"</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">"</span>)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "\"" "\\"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">writeLines</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>"
\</code></pre>
</div>
</div>
<p>Existe una serie de otros caracteres especiales. Los más comunes son <code>"\n"</code>, para salto de línea, y <code>"\t"</code>, para tabulación. Puedes ver la lista completa pidiendo ayuda acerca de <code>"</code>: <code>?'"'</code> o <code>?"'"</code>. A veces también verás cadenas del tipo <code>"\u00b5"</code>, que es la manera de escribir caracteres que no están en inglés para que funcionen en todas las plataformas:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="st">"\u00b5"</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "µ"</code></pre>
</div>
</div>
<p>Usualmente se guardan múltiples cadenas en un vector de caracteres. Puedes crearlo usando <code>c()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="st">"uno"</span>, <span class="st">"dos"</span>, <span class="st">"tres"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "uno"  "dos"  "tres"</code></pre>
</div>
</div>
<section id="largo-de-cadena" class="level3" data-number="14.2.1">
<h3 data-number="14.2.1" class="anchored" data-anchor-id="largo-de-cadena"><span class="header-section-number">14.2.1</span> Largo de cadena</h3>
<p>R base tiene muchas funciones para trabajar con cadenas de caracteres, pero las evitaremos porque pueden ser incosistentes, lo que hace que sean difíciles de recordar. En su lugar, utilizaremos funciones del paquete <strong>stringr</strong>. Estas tienen nombres más intuitivos y todas empienzan con <code>str_</code>. Por ejemplo, <code>str_length()</code> te dice el número de caracteres de una cadena (<em>length</em> en inglés es <em>largo</em>):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_length</span>(<span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"R para Ciencia de Datos"</span>, <span class="cn">NA</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  1 23 NA</code></pre>
</div>
</div>
<p>El prefijo común <code>str_</code> es particularmente útil si utilizas RStudio, ya que al escribir <code>str_</code> se activa el autocompletado, lo que te permite ver todas las funciones de <strong>stringr</strong>:</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="screenshots/stringr-autocomplete.png" class="img-fluid" width="678"></p>
</div>
</div>
</section>
<section id="combinar-cadenas" class="level3" data-number="14.2.2">
<h3 data-number="14.2.2" class="anchored" data-anchor-id="combinar-cadenas"><span class="header-section-number">14.2.2</span> Combinar cadenas</h3>
<p>Para combinar dos o más cadenas utiliza <code>str_c()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(<span class="st">"x"</span>, <span class="st">"y"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "xy"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(<span class="st">"x"</span>, <span class="st">"y"</span>, <span class="st">"z"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "xyz"</code></pre>
</div>
</div>
<p>Usa el argumento <code>sep</code> para controlar cómo separlas:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(<span class="st">"x"</span>, <span class="st">"y"</span>, <span class="at">sep =</span> <span class="st">", "</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "x, y"</code></pre>
</div>
</div>
<p>Al igual que en muchas otras funciones de R, los valores faltantes son contagiosos. Si quieres que se impriman como <code>"NA"</code>, utiliza <code>str_replace_na()</code> (<em>replace</em> = remplazar):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"abc"</span>, <span class="cn">NA</span>)</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(<span class="st">"|-"</span>, x, <span class="st">"-|"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "|-abc-|" NA       </code></pre>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(<span class="st">"|-"</span>, <span class="fu">str_replace_na</span>(x), <span class="st">"-|"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "|-abc-|" "|-NA-|" </code></pre>
</div>
</div>
<p>Como se observa arriba, <code>str_c()</code> es una función vectorizada que automáticamente recicla los vectores más cortos hasta alcanzar la extensión del más largo:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(<span class="st">"prefijo-"</span>, <span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>), <span class="st">"-sufijo"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "prefijo-a-sufijo" "prefijo-b-sufijo" "prefijo-c-sufijo"</code></pre>
</div>
</div>
<p>Los objetos de extensión 0 se descartan de manera silenciosa. Esto es particularmente útil en conjunto con <code>if</code> (<em>si</em>):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>nombre <span class="ot">&lt;-</span> <span class="st">"Hadley"</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>hora_del_dia <span class="ot">&lt;-</span> <span class="st">"mañana"</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>cumpleanios <span class="ot">&lt;-</span> <span class="cn">FALSE</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Que tengas una buena "</span>, hora_del_dia, <span class="st">", "</span>, nombre,</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (cumpleanios) <span class="st">" y ¡FELIZ CUMPLEAÑOS!"</span>,</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">"."</span></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Que tengas una buena mañana, Hadley."</code></pre>
</div>
</div>
<p>Para colapsar un vector de cadenas en una sola, utiliza <code>collapse</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(<span class="fu">c</span>(<span class="st">"x"</span>, <span class="st">"y"</span>, <span class="st">"z"</span>), <span class="at">collapse =</span> <span class="st">", "</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "x, y, z"</code></pre>
</div>
</div>
</section>
<section id="dividir-cadenas" class="level3" data-number="14.2.3">
<h3 data-number="14.2.3" class="anchored" data-anchor-id="dividir-cadenas"><span class="header-section-number">14.2.3</span> Dividir cadenas</h3>
<p>Puedes extraer partes de una cadena utilizando <code>str_sub()</code>. Al igual que la cadena, <code>str_sub()</code> tiene como argumentos <code>start</code> (<em>inicio</em>) y <code>end</code> (<em>fin</em>), que indican la posición (inclusiva) del subconjunto que se quiere extraer:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Manzana"</span>, <span class="st">"Plátano"</span>, <span class="st">"Pera"</span>)</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sub</span>(x, <span class="dv">1</span>, <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Man" "Plá" "Per"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># los números negativos cuentan de manera invertida desde el final</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sub</span>(x, <span class="sc">-</span><span class="dv">3</span>, <span class="sc">-</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "ana" "ano" "era"</code></pre>
</div>
</div>
<p>Ten en cuenta que <code>str_sub()</code> no fallará si la cadena es muy corta; simplemente devolverá todo lo que sea posible:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sub</span>(<span class="st">"a"</span>, <span class="dv">1</span>, <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "a"</code></pre>
</div>
</div>
<p>También puedes utilizar <code>str_sub()</code> en forma de asignación para modificar una cadena:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sub</span>(x, <span class="dv">1</span>, <span class="dv">1</span>) <span class="ot">&lt;-</span> <span class="fu">str_to_lower</span>(<span class="fu">str_sub</span>(x, <span class="dv">1</span>, <span class="dv">1</span>))</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "manzana" "plátano" "pera"   </code></pre>
</div>
</div>
</section>
<section id="locales" class="level3" data-number="14.2.4">
<h3 data-number="14.2.4" class="anchored" data-anchor-id="locales"><span class="header-section-number">14.2.4</span> <em>Locales</em></h3>
<p>Arriba utilizamos <code>str_to_lower()</code> para cambiar el texto a minúsculas. También puedes utilizar <code>str_to_upper()</code> o <code>str_to_title()</code>, si quieres modificar el texto a mayúsculas o formato título, respectivamente. Sin embargo, este tipo de cambios puede ser más complicado de lo parece a primera vista, ya que las reglas no son iguales en todos los idiomas. Puedes selecionar qué tipo de reglas aplicar especificando el entorno local o <em>locale</em>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># La lengua turca tiene dos i: una con punto y otra sin punto</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Tienen diferentes reglas para convertirlas en mayúsculas</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a><span class="fu">str_to_upper</span>(<span class="fu">c</span>(<span class="st">"i"</span>, <span class="st">"ı"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "I" "I"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_to_upper</span>(<span class="fu">c</span>(<span class="st">"i"</span>, <span class="st">"ı"</span>), <span class="at">locale =</span> <span class="st">"tr"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "İ" "I"</code></pre>
</div>
</div>
<p>El entorno local o <em>locale</em> se especifica con un código de idioma ISO 639, que es una abreviación de dos letras. Si todavía no conoces el código para tu idioma, en <a href="https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes">Wikipedia</a> puedes encontrar una buena lista. Si dejas el <em>locale</em> en blanco, se aplicará el que estés utilizando actualmente, que es provisto por tu sistema operativo.</p>
<p>Otra operación importante que es afectada por el <em>locale</em> es ordenar. Las funciones <code>order()</code> y <code>sort()</code> de R base ordenan las cadenas usando el <em>locale</em> actual. Si quieres un comportamiento consistente a través de diferentes computadoras, sería preferible usar <code>str_sort()</code> y <code>str_order()</code>, que aceptan un argumento adicional para definir el <code>locale</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"arándano"</span>, <span class="st">"espinaca"</span>, <span class="st">"banana"</span>)</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sort</span>(x, <span class="at">locale =</span> <span class="st">"es"</span>)  <span class="co"># Español</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "arándano" "banana"   "espinaca"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sort</span>(x, <span class="at">locale =</span> <span class="st">"haw"</span>) <span class="co"># Hawaiano</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "arándano" "espinaca" "banana"  </code></pre>
</div>
</div>
</section>
<section id="ejercicios" class="level3" data-number="14.2.5">
<h3 data-number="14.2.5" class="anchored" data-anchor-id="ejercicios"><span class="header-section-number">14.2.5</span> Ejercicios</h3>
<ol type="1">
<li><p>En ejemplos de código en los que no se utiliza <strong>stringr</strong>, verás usualmente <code>paste()</code> y <code>paste0()</code> (<em>paste</em> = pegar). ¿Cuál es la diferencia entre estas dos funciones? ¿A qué función de <strong>stringr</strong> son equivalentes? ¿Cómo difieren estas dos funciones respecto de su manejo de los <code>NA</code>?</p></li>
<li><p>Describe con tus propias palabras la diferencia entre los argumentos <code>sep</code> y <code>collapse</code> de la función <code>str_c()</code>.</p></li>
<li><p>Utiliza <code>str_length()</code> y <code>str_sub()</code> para extraer el caracter del medio de una cadena. ¿Qué harías si el número de caracteres es par?</p></li>
<li><p>¿Qué hace <code>str_wrap()</code>? (<em>wrap</em> = envolver) ¿Cuándo podrías querer utilizarla?</p></li>
<li><p>¿Qué hace <code>str_trim()</code>? (<em>trim</em> = recortar) ¿Cuál es el opuesto de <code>str_trim()</code>?</p></li>
<li><p>Escribe una función que convierta, por ejemplo, el vector <code>c("a", "b", "c")</code> en la cadena <code>a, b y c</code>. Piensa con detención qué debería hacer dado un vector de largo 0, 1 o 2.</p></li>
</ol>
</section>
<section id="buscar-coincidencia-de-patrones-con-expresiones-regulares" class="level3" data-number="14.2.6">
<h3 data-number="14.2.6" class="anchored" data-anchor-id="buscar-coincidencia-de-patrones-con-expresiones-regulares"><span class="header-section-number">14.2.6</span> Buscar coincidencia de patrones con expresiones regulares</h3>
<p>Las expresiones regulares son un lenguaje conciso que te permite describir patrones en cadenas de caracteres. Toma un tiempo entenderlas, pero una vez que lo hagas te darás cuenta que son extremadamente útiles.</p>
<p>Para aprender sobre expresiones regulares usaremos <code>str_view()</code> y <code>str_view_all()</code> (<em>view</em> = ver). Estas funciones toman un vector de caracteres y una expresión regular y te muestran cómo coinciden. Partiremos con expresiones regulares simples que gradualmente se irán volviendo más y más complejas. Una vez que domines la coincidencia de patrones, aprenderás cómo aplicar estas ideas con otras funciones de <strong>stringr</strong>.</p>
</section>
<section id="coincidencias-básicas" class="level3" data-number="14.2.7">
<h3 data-number="14.2.7" class="anchored" data-anchor-id="coincidencias-básicas"><span class="header-section-number">14.2.7</span> Coincidencias básicas</h3>
<p>Los patrones más simples buscan coincidencias con cadenas exactas:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"manzana"</span>, <span class="st">"banana"</span>, <span class="st">"pera"</span>)</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(x, <span class="st">"an"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ m&lt;an&gt;z&lt;an&gt;a
[2] │ b&lt;an&gt;&lt;an&gt;a</code></pre>
</div>
</div>
<p>El siguiente paso en complejidad es <code>.</code>, que coincide con cualquier caracter (excepto un salto de línea):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(x, <span class="st">".a."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ &lt;man&gt;&lt;zan&gt;a
[2] │ &lt;ban&gt;ana</code></pre>
</div>
</div>
<p>Pero si “<code>.</code>” coincide con cualquier caracter, ¿cómo buscar una coincidencia con el caracter “<code>.</code>”? Necesitas utilizar un “escape” para decirle a la expresión regular que quieres hacerla coincidir de manera exacta, no usar su comportamiento especial. Al igual que en las cadenas, las expresiones regulares usan la barra invertida, <code>\</code>, para “escapar” los comportamientos especiales. Por lo tanto, para hacer coincidir un <code>.</code>, necesitas la expresión regular <code>\.</code>. Lamentablemente, esto crea una problema. Estamos usando cadenas para representar una expresión regular y en ellas <code>\</code> también se usa como símbolo de “escape”. Por lo tanto, para crear la expresión regular <code>\.</code> necesitamos la cadena <code>"\\."</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Para crear una expresión regular necesitamos \\</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>punto <span class="ot">&lt;-</span> <span class="st">"</span><span class="sc">\\</span><span class="st">."</span></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Pero la expresión en sí misma solo contiene una \</span></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a><span class="fu">writeLines</span>(punto)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>\.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Esto le dice a R que busque el . de manera explícita</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(<span class="fu">c</span>(<span class="st">"abc"</span>, <span class="st">"a.c"</span>, <span class="st">"bef"</span>), <span class="st">"a</span><span class="sc">\\</span><span class="st">.c"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[2] │ &lt;a.c&gt;</code></pre>
</div>
</div>
<p>Si <code>\</code> se utiliza para escapar un caracter en una expresión regular, ¿cómo coincidir de manera literal una <code>\</code>? Bueno, necesitarías escaparla creando la expresión regular <code>\\</code>. Para crear esa expresión regular necesitas usar una cadena, que requiere también escapar la <code>\</code>. Esto quiere decir que para coincidir literalmente <code>\</code> necesitas escribir <code>"\\\\"</code> — ¡necesitas cuatro barras invertidas para coincidir una!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="st">"a</span><span class="sc">\\</span><span class="st">b"</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="fu">writeLines</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>a\b</code></pre>
</div>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(x, <span class="st">"</span><span class="sc">\\\\</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ a&lt;\&gt;b</code></pre>
</div>
</div>
<p>En este libro escribiremos las expresiones regulares como <code>\.</code> y las cadenas que representan a las expresiones regulares como <code>"\\."</code>.</p>
<section id="ejercicios-1" class="level4" data-number="14.2.7.1">
<h4 data-number="14.2.7.1" class="anchored" data-anchor-id="ejercicios-1"><span class="header-section-number">14.2.7.1</span> Ejercicios</h4>
<ol type="1">
<li><p>Explica por qué cada una de estas cadenas no coincide con <code>\</code>: <code>"\"</code>, <code>"\\"</code>, <code>"\\\"</code>.</p></li>
<li><p>¿Cómo harías coincidir la secuencia <code>"'\</code>?</p></li>
<li><p>¿Con qué patrones coincidiría la expresión regular<code>\..\..\..</code>? ¿Cómo la representarías en una cadena?</p></li>
</ol>
</section>
</section>
<section id="anclas" class="level3" data-number="14.2.8">
<h3 data-number="14.2.8" class="anchored" data-anchor-id="anclas"><span class="header-section-number">14.2.8</span> Anclas</h3>
<p>Por defecto, las expresiones regulares buscarán una coincidencia en cualquier parte de una cadena. Suele ser útil <em>anclar</em> una expresión regular para que solo busque coincidencias al inicio o al final. Puedes utilizar:</p>
<ul>
<li><code>^</code> para buscar la coincidencia al inicio de la cadena.</li>
<li><code>$</code> para buscar la coincidencia al final de la cadena.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"arándano"</span>, <span class="st">"banana"</span>, <span class="st">"pera"</span>)</span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(x, <span class="st">"^a"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ &lt;a&gt;rándano</code></pre>
</div>
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(x, <span class="st">"a$"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[2] │ banan&lt;a&gt;
[3] │ per&lt;a&gt;</code></pre>
</div>
</div>
<p>Para recordar cuál es cuál, puedes intentar este recurso mnemotécnico que aprendimos de <a href="https://twitter.com/emisshula/status/323863393167613953">Evan Misshula</a>: si empiezas con potencia (<code>^</code>), terminarás con dinero (<code>$</code>).</p>
<p>Para forzar que una expresión regular coincida con una cadena completa, ánclala usando tanto <code>^</code> como <code>$</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"pie de manzana"</span>, <span class="st">"manzana"</span>, <span class="st">"queque de manzana"</span>)</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(x, <span class="st">"manzana"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ pie de &lt;manzana&gt;
[2] │ &lt;manzana&gt;
[3] │ queque de &lt;manzana&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(x, <span class="st">"^manzana$"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[2] │ &lt;manzana&gt;</code></pre>
</div>
</div>
<p>También puedes coincidir el límite entre palabras con <code>\b</code>. No utilizamos frecuentemente esta forma en R, pero sí a veces cuando buscamos en RStudio el nombre de una función que también compone el nombre de otras funciones. Por ejemplo, buscaríamos <code>\bsum\b</code> para evitar la coincidencia con <code>summarise</code>, <code>summary</code>, <code>rowsum</code> y otras.</p>
<section id="ejercicios-2" class="level4" data-number="14.2.8.1">
<h4 data-number="14.2.8.1" class="anchored" data-anchor-id="ejercicios-2"><span class="header-section-number">14.2.8.1</span> Ejercicios</h4>
<ol type="1">
<li><p>¿Cómo harías coincidir la cadena <code>"$^$"</code> de manera literal?</p></li>
<li><p>Dado el corpus de palabras comunes en <code>datos::palabras</code>, crea una expresión regular que busque palabras que:</p>
<ol type="1">
<li>Empiecen con “y”.</li>
<li>Terminen con “z”</li>
<li>Tengan una extensión de exactamente tres letras. (¡No hagas trampa usando <code>str_length()</code>!)</li>
<li>Tengan ocho letras o más.</li>
</ol>
<p>Dado que esta será una lista larga, podrías querer usar el argumento <code>match</code> en <code>str_view()</code> para mostrar solo las palabras que coincidan o no coincidan.</p></li>
</ol>
</section>
</section>
<section id="clases-de-caracteres-y-alternativas" class="level3" data-number="14.2.9">
<h3 data-number="14.2.9" class="anchored" data-anchor-id="clases-de-caracteres-y-alternativas"><span class="header-section-number">14.2.9</span> Clases de caracteres y alternativas</h3>
<p>Existe una serie de patrones especiales que coinciden con más de un caracter. Ya has visto <code>.</code>, que coincide con cualquier caracter excepto un salto de línea. Hay otras cuatro herramientas que son de utilidad:</p>
<ul>
<li><code>\d</code>: coincide con cualquier dígito.</li>
<li><code>\s</code>: coincide con cualquier espacio en blanco (por ejemplo, espacio simple, tabulador, salto de línea).</li>
<li><code>[abc]</code>: coincide con a, b o c.</li>
<li><code>[^abc]</code>: coincide con todo menos con a, b o c.</li>
</ul>
<p>Recuerda que para crear una expresión regular que contenga <code>\d</code> o <code>\s</code> necesitas escapar la <code>\</code> en la cadena, por lo que debes escribir <code>"\\d"</code> o <code>"\\s"</code>.</p>
<p>Utilizar una clase de caracter que contenga en su interior un solo caracter puede ser una buena alternativa a la barra invertida cuando quieres incluir un solo metacaracter en la expresión regular. Muchas personas encuentran que así es más fácil de leer.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Buscar de forma literal un caracter que usualmente tiene un significado especial en una expresión regular</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(<span class="fu">c</span>(<span class="st">"abc"</span>, <span class="st">"a.c"</span>, <span class="st">"a*c"</span>, <span class="st">"a c"</span>), <span class="st">"a[.]c"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[2] │ &lt;a.c&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(<span class="fu">c</span>(<span class="st">"abc"</span>, <span class="st">"a.c"</span>, <span class="st">"a*c"</span>, <span class="st">"a c"</span>), <span class="st">".[*]c"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[3] │ &lt;a*c&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(<span class="fu">c</span>(<span class="st">"abc"</span>, <span class="st">"a.c"</span>, <span class="st">"a*c"</span>, <span class="st">"a c"</span>), <span class="st">"a[ ]"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[4] │ &lt;a &gt;c</code></pre>
</div>
</div>
<p>Esto funciona para la mayoría (pero no para todos) los metacaracteres de las expresiones regulares: <code>$</code> <code>.</code> <code>|</code> <code>?</code> <code>*</code> <code>+</code> <code>(</code> <code>)</code> <code>[</code> <code>{</code>. Desafortunadamente, existen unos pocos caracteres que tienen un significado especial incluso dentro de una clase de caracteres y deben manejarse con barras invertidas para escaparlos: <code>]</code> <code>\</code> <code>^</code> y <code>-</code>.</p>
<p>Puedes utiizar una <em>disyunción</em> para elegir entre uno más patrones alternativos. Por ejemplo, <code>abc|d..a</code> concidirá tanto con ‘“abc”’, como con <code>"duna"</code>. Ten en cuenta que la precedencia de <code>|</code> es baja, por lo que <code>abc|xyz</code> coincidirá con <code>abc</code> o <code>xyz</code>, no con <code>abcyz</code> o <code>abxyz</code>. Al igual que en expresiones matemáticas, si el valor de <code>|</code> se vuelve confuso, utiliza paréntesis para dejar claro qué es lo que quieres:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(<span class="fu">c</span>(<span class="st">"cómo"</span>, <span class="st">"como"</span>), <span class="st">"c(ó|o)mo"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ &lt;cómo&gt;
[2] │ &lt;como&gt;</code></pre>
</div>
</div>
<section id="ejercicios-3" class="level4" data-number="14.2.9.1">
<h4 data-number="14.2.9.1" class="anchored" data-anchor-id="ejercicios-3"><span class="header-section-number">14.2.9.1</span> Ejercicios</h4>
<ol type="1">
<li><p>Crea una expresión regular que encuentre todas las palabras que:</p>
<ol type="1">
<li><p>Empiecen con una vocal.</p></li>
<li><p>Solo contengan consonantes. (Pista: piensa en cómo buscar coincidencias para “no”-vocales.)</p></li>
<li><p>Terminen en <code>ón</code>, pero no en <code>ión</code>.</p></li>
<li><p>Terminen con <code>ndo</code> o <code>ado</code>.</p></li>
</ol></li>
<li><p>¿Siempre a una “q” la sigue una “u”?</p></li>
<li><p>Escribe una expresión regular que permita buscar un verbo que haya sido escrito usando voseo en segunda persona plural<br>
(por ejemplo, <em>queréis</em> en vez de <em>quieren</em>).</p></li>
<li><p>Crea una expresión regular que coincida con la forma en que habitualmente se escriben los números de teléfono en tu país.</p></li>
<li><p>En inglés existe una regla que dice que la letra i va siempre antes de la e, excepto cuando está después de una c”. Verifica empíricamente esta regla utilizando las palabras contenidas en <code>stringr::words</code>.</p></li>
</ol>
</section>
</section>
<section id="repetición" class="level3" data-number="14.2.10">
<h3 data-number="14.2.10" class="anchored" data-anchor-id="repetición"><span class="header-section-number">14.2.10</span> Repetición</h3>
<p>El siguiente paso en términos de poder implica controlar cuántas veces queremos que se encuentre un patrón:</p>
<ul>
<li><code>?</code>: 0 o 1</li>
<li><code>+</code>: 1 o más</li>
<li><code>*</code>: 0 o más</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="st">"1888 es el año más largo en números romanos: MDCCCLXXXVIII"</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(x, <span class="st">"CC?"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ 1888 es el año más largo en números romanos: MD&lt;CC&gt;&lt;C&gt;LXXXVIII</code></pre>
</div>
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(x, <span class="st">"CC+"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ 1888 es el año más largo en números romanos: MD&lt;CCC&gt;LXXXVIII</code></pre>
</div>
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(x, <span class="st">'C[LX]+'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ 1888 es el año más largo en números romanos: MDCC&lt;CLXXX&gt;VIII</code></pre>
</div>
</div>
<p>Ten en cuenta que la precedencia de este operador es alta, por lo que puedes escribir: <code>cantái?s</code> para encontrar tanto voseo americano como de la variante peninsular del español (es decir, <em>cantás</em> y <em>cantáis</em>). Esto quiere decir que en la mayor parte de los usos se necesitarán paréntesis, como <code>bana(na)+</code>.</p>
<p>También puedes especificar el número de coincidencias que quieres encontrar de manera precisa:</p>
<ul>
<li><code>{n}</code>: exactamente n</li>
<li><code>{n,}</code>: n o más</li>
<li><code>{,m}</code>: no más de m</li>
<li><code>{n,m}</code>: entre n y m</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(x, <span class="st">"C{2}"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ 1888 es el año más largo en números romanos: MD&lt;CC&gt;CLXXXVIII</code></pre>
</div>
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(x, <span class="st">"C{2,}"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ 1888 es el año más largo en números romanos: MD&lt;CCC&gt;LXXXVIII</code></pre>
</div>
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(x, <span class="st">"C{2,3}"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ 1888 es el año más largo en números romanos: MD&lt;CCC&gt;LXXXVIII</code></pre>
</div>
</div>
<p>Por defecto, este tipo de coincidencias son “avaras” (<em>greedy</em>): tratarán de coincidir con la cadena más larga posible. También puedes hacerlas “perezosas” (<em>lazy</em>) para que coincidan con la cadena más corta posible, poniendo un <code>?</code> después de ellas. Esta es una característica avanzada de las expresiones regulares, pero es útil saber que existe:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(x, <span class="st">'C{2,3}?'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ 1888 es el año más largo en números romanos: MD&lt;CC&gt;CLXXXVIII</code></pre>
</div>
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(x, <span class="st">'C[LX]+?'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ 1888 es el año más largo en números romanos: MDCC&lt;CL&gt;XXXVIII</code></pre>
</div>
</div>
<section id="ejercicios-4" class="level4" data-number="14.2.10.1">
<h4 data-number="14.2.10.1" class="anchored" data-anchor-id="ejercicios-4"><span class="header-section-number">14.2.10.1</span> Ejercicios</h4>
<ol type="1">
<li><p>Describe los equivalentes de <code>?</code>, <code>+</code>, <code>*</code> en el formato <code>{m,n}</code>.</p></li>
<li><p>Describe en palabras con qué coincidiría cada una de estas expresiones regulares: (lee con atención para ver si estamos utilizando una expresión regular o una cadena que define una expresión regular.)</p>
<ol type="1">
<li><code>^.*$</code></li>
<li><code>"\\{.+\\}"</code></li>
<li><code>\d{4}-\d{2}-\d{2}</code></li>
<li><code>"\\\\{4}"</code></li>
</ol></li>
<li><p>Crea expresiones regulares para buscar todas las palabras que:</p>
<ol type="1">
<li>Empiecen con dos consonantes.</li>
<li>Tengan tres o más vocales seguidas.</li>
<li>Tengan tres o más pares de vocal-consonante seguidos.</li>
</ol></li>
</ol>
</section>
</section>
<section id="agrupamiento-y-referencias-previas" class="level3" data-number="14.2.11">
<h3 data-number="14.2.11" class="anchored" data-anchor-id="agrupamiento-y-referencias-previas"><span class="header-section-number">14.2.11</span> Agrupamiento y referencias previas</h3>
<p>Anteriormente aprendiste sobre el uso de paréntesis para desambiguar expresiones complejas. Los paréntesis también sirven para crear un grupo de captura <em>numerado</em> (número 1, 2, etc.). Un grupo de captura guarda <em>la parte de la cadena</em> que coincide con la parte de la expresión regular entre paréntesis. Puedes referirte al mismo texto tal como fue guardado en un grupo de captura utilizando <em>referencias previas</em>, como <code>\1</code>, <code>\2</code> etc. Por ejemplo, la siguiente expresión regular busca todas las frutas que tengan un par de letras repetido.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(frutas, <span class="st">"(..)</span><span class="sc">\\</span><span class="st">1"</span>, <span class="at">match =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] │ b&lt;anan&gt;a
 [2] │ &lt;papa&gt;ya
 [8] │ &lt;anan&gt;á
[23] │ &lt;coco&gt;</code></pre>
</div>
</div>
<p>(En breve, también verás cómo esto es útil en conjunto con <code>str_match()</code>.)</p>
<section id="ejercicios-5" class="level4" data-number="14.2.11.1">
<h4 data-number="14.2.11.1" class="anchored" data-anchor-id="ejercicios-5"><span class="header-section-number">14.2.11.1</span> Ejercicios</h4>
<ol type="1">
<li><p>Describe en palabras con qué coinciden estas expresiones:</p>
<ol type="1">
<li><code>(.)\1\1</code></li>
<li><code>"(.)(.)\\2\\1"</code></li>
<li><code>(..)\1</code></li>
<li><code>"(.).\\1.\\1"</code></li>
<li><code>"(.)(.)(.).*\\3\\2\\1"</code></li>
</ol></li>
<li><p>Construye una expresión regular que coincida con palabras que:</p>
<ol type="1">
<li><p>Empiecen y terminen con el mismo caracter.</p></li>
<li><p>Contengan un par de letras repetido (p.&nbsp;ej. “nacional” tiene “na” repetido dos veces.)</p></li>
<li><p>Contengan una letra repetida en al menos tres lugares (p.&nbsp;ej. “característica” tiene tres “a”.)</p></li>
</ol></li>
</ol>
</section>
</section>
</section>
<section id="herramientas" class="level2" data-number="14.3">
<h2 data-number="14.3" class="anchored" data-anchor-id="herramientas"><span class="header-section-number">14.3</span> Herramientas</h2>
<p>Ahora que has aprendido los elementos básicos de las expresiones regulares, es tiempo de aprender cómo aplicarlos en problemas reales. En esta sección aprenderás una amplia variedad de funciones de <strong>stringr</strong> que te permitirán:</p>
<ul>
<li>Determinar qué cadenas coinciden con un patrón.</li>
<li>Encontrar la posición de una coincidencia.</li>
<li>Extraer el contenido de las coincidencias.</li>
<li>Remplazar coincidencias con nuevos valores.</li>
<li>Dividir una cadena de acuerdo a una coincidencia.</li>
</ul>
<p>Una advertencia antes de continuar: debido a que las expresiones regulares son tan poderosas, es fácil intentar resolver todos los problemas con una sola expresión regular. En palabras de Jamie Zawinski:</p>
<blockquote class="blockquote">
<p>Cuando se enfrentan a un problema, algunas personas piensan “Lo sé, usaré expresiones regulares.” Ahora tienen dos problemas.</p>
</blockquote>
<p>Como advertencia, revisa esta expresión regular que chequea si una dirección de correo electrónico es válida:</p>
<pre><code>(?:(?:\r\n)?[ \t])*(?:(?:(?:[^()&lt;&gt;@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t]
)+|\Z|(?=[\["()&lt;&gt;@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:
\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()&lt;&gt;@,;:\\".\[\] \000-\031]+(?:(?:(
?:\r\n)?[ \t])+|\Z|(?=[\["()&lt;&gt;@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ 
\t]))*"(?:(?:\r\n)?[ \t])*))*@(?:(?:\r\n)?[ \t])*(?:[^()&lt;&gt;@,;:\\".\[\] \000-\0
31]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()&lt;&gt;@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\
](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()&lt;&gt;@,;:\\".\[\] \000-\031]+
(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()&lt;&gt;@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:
(?:\r\n)?[ \t])*))*|(?:[^()&lt;&gt;@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z
|(?=[\["()&lt;&gt;@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)
?[ \t])*)*\&lt;(?:(?:\r\n)?[ \t])*(?:@(?:[^()&lt;&gt;@,;:\\".\[\] \000-\031]+(?:(?:(?:\
r\n)?[ \t])+|\Z|(?=[\["()&lt;&gt;@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[
 \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()&lt;&gt;@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)
?[ \t])+|\Z|(?=[\["()&lt;&gt;@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t]
)*))*(?:,@(?:(?:\r\n)?[ \t])*(?:[^()&lt;&gt;@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[
 \t])+|\Z|(?=[\["()&lt;&gt;@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*
)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()&lt;&gt;@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t]
)+|\Z|(?=[\["()&lt;&gt;@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*)
*:(?:(?:\r\n)?[ \t])*)?(?:[^()&lt;&gt;@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+
|\Z|(?=[\["()&lt;&gt;@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r
\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()&lt;&gt;@,;:\\".\[\] \000-\031]+(?:(?:(?:
\r\n)?[ \t])+|\Z|(?=[\["()&lt;&gt;@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t
]))*"(?:(?:\r\n)?[ \t])*))*@(?:(?:\r\n)?[ \t])*(?:[^()&lt;&gt;@,;:\\".\[\] \000-\031
]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()&lt;&gt;@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](
?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()&lt;&gt;@,;:\\".\[\] \000-\031]+(?
:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()&lt;&gt;@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?
:\r\n)?[ \t])*))*\&gt;(?:(?:\r\n)?[ \t])*)|(?:[^()&lt;&gt;@,;:\\".\[\] \000-\031]+(?:(?
:(?:\r\n)?[ \t])+|\Z|(?=[\["()&lt;&gt;@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?
[ \t]))*"(?:(?:\r\n)?[ \t])*)*:(?:(?:\r\n)?[ \t])*(?:(?:(?:[^()&lt;&gt;@,;:\\".\[\] 
\000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()&lt;&gt;@,;:\\".\[\]]))|"(?:[^\"\r\\]|
\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()&lt;&gt;
@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()&lt;&gt;@,;:\\".\[\]]))|"
(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*))*@(?:(?:\r\n)?[ \t]
)*(?:[^()&lt;&gt;@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()&lt;&gt;@,;:\\
".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?
:[^()&lt;&gt;@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()&lt;&gt;@,;:\\".\[
\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*|(?:[^()&lt;&gt;@,;:\\".\[\] \000-
\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()&lt;&gt;@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(
?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*)*\&lt;(?:(?:\r\n)?[ \t])*(?:@(?:[^()&lt;&gt;@,;
:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()&lt;&gt;@,;:\\".\[\]]))|\[([
^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()&lt;&gt;@,;:\\"
.\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()&lt;&gt;@,;:\\".\[\]]))|\[([^\[\
]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*(?:,@(?:(?:\r\n)?[ \t])*(?:[^()&lt;&gt;@,;:\\".\
[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()&lt;&gt;@,;:\\".\[\]]))|\[([^\[\]\
r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()&lt;&gt;@,;:\\".\[\] 
\000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()&lt;&gt;@,;:\\".\[\]]))|\[([^\[\]\r\\]
|\\.)*\](?:(?:\r\n)?[ \t])*))*)*:(?:(?:\r\n)?[ \t])*)?(?:[^()&lt;&gt;@,;:\\".\[\] \0
00-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()&lt;&gt;@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\
.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()&lt;&gt;@,
;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()&lt;&gt;@,;:\\".\[\]]))|"(?
:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*))*@(?:(?:\r\n)?[ \t])*
(?:[^()&lt;&gt;@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()&lt;&gt;@,;:\\".
\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[
^()&lt;&gt;@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()&lt;&gt;@,;:\\".\[\]
]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*\&gt;(?:(?:\r\n)?[ \t])*)(?:,\s*(
?:(?:[^()&lt;&gt;@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()&lt;&gt;@,;:\\
".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*)(?:\.(?:(
?:\r\n)?[ \t])*(?:[^()&lt;&gt;@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[
\["()&lt;&gt;@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t
])*))*@(?:(?:\r\n)?[ \t])*(?:[^()&lt;&gt;@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t
])+|\Z|(?=[\["()&lt;&gt;@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?
:\.(?:(?:\r\n)?[ \t])*(?:[^()&lt;&gt;@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|
\Z|(?=[\["()&lt;&gt;@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*|(?:
[^()&lt;&gt;@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()&lt;&gt;@,;:\\".\[\
]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*)*\&lt;(?:(?:\r\n)
?[ \t])*(?:@(?:[^()&lt;&gt;@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["
()&lt;&gt;@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)
?[ \t])*(?:[^()&lt;&gt;@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()&lt;&gt;
@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*(?:,@(?:(?:\r\n)?[
 \t])*(?:[^()&lt;&gt;@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()&lt;&gt;@,
;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t]
)*(?:[^()&lt;&gt;@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()&lt;&gt;@,;:\\
".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*)*:(?:(?:\r\n)?[ \t])*)?
(?:[^()&lt;&gt;@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()&lt;&gt;@,;:\\".
\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*)(?:\.(?:(?:
\r\n)?[ \t])*(?:[^()&lt;&gt;@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\[
"()&lt;&gt;@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])
*))*@(?:(?:\r\n)?[ \t])*(?:[^()&lt;&gt;@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])
+|\Z|(?=[\["()&lt;&gt;@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\
.(?:(?:\r\n)?[ \t])*(?:[^()&lt;&gt;@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z
|(?=[\["()&lt;&gt;@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*\&gt;(?:(
?:\r\n)?[ \t])*))*)?;\s*)</code></pre>
<p>En cierto sentido, este es un ejemplo “patológico” (porque las direcciones de correo electrónico son de verdad sorpresivamente complejas), pero se usa en código real. Mira esta discusión (en inglés) en Stack Overflow <a href="http://stackoverflow.com/a/201378" class="uri">http://stackoverflow.com/a/201378</a> para más detalles.</p>
<p>No olvides que estás trabajando en un lenguaje de programación y que tienes otras herramientas a tu disposición. En vez de crear una sola expresión regular compleja, usualmente es más fácil crear una serie de expresiones regulares más simples. Si te atascaste tratando de crear una sola expresión regular que resuelva tu problema, da un paso atrás y piensa cómo podrías dividir el problema en partes más pequeñas. Esto te permitirá ir resolviendo cada desafío antes de moverte al siguiente.</p>
<section id="detectar-coincidencias" class="level3" data-number="14.3.1">
<h3 data-number="14.3.1" class="anchored" data-anchor-id="detectar-coincidencias"><span class="header-section-number">14.3.1</span> Detectar coincidencias</h3>
<p>Para determinar si un vector de caracteres coincide con un patrón de búsqueda, puedes utilizar <code>str_detect()</code>. Este devuelve un vector lógico del mismo largo que el <em>input</em>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"manzana"</span>, <span class="st">"plátano"</span>, <span class="st">"pera"</span>)</span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(x, <span class="st">"e"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE FALSE  TRUE</code></pre>
</div>
</div>
<p>Recuerda que cuando usas vectores lógicos en un contexto numérico, <code>FALSE</code> (<em>falso</em>) se convierte en 0 y <code>TRUE</code> (<em>verdadero</em>) se convierte en 1. Eso hace que <code>sum()</code> (<em>suma</em>) y <code>mean()</code> (<em>media</em>) sean funciones útiles si quieres responder preguntas sobre coincidencias a lo largo de un vector más extenso:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ¿Cuántas palabras comunes empiezan con m?</span></span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">str_detect</span>(palabras, <span class="st">"^m"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 81</code></pre>
</div>
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ¿Qué proporción de palabras comunes terminan con una vocal?</span></span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(<span class="fu">str_detect</span>(palabras, <span class="st">"[aáeéiéoéuú]$"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.546</code></pre>
</div>
</div>
<p>Cuando tienes condiciones lógicas complejas, (p.&nbsp;ej., encontrar <em>a</em> o <em>b</em> pero no <em>c</em>, salvo que <em>d</em>) suele ser más fácil combinar múltiples llamadas a <code>str_detect()</code> con operadores lógicos, que tratar de crear una sola expresión regular. Por ejemplo, hay dos maneras de buscar todas las palabras que no contengan ninguna vocal:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Encuentra todas las palabras que contengan al menos una vocal, y luego niégalo</span></span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a>sin_vocales_1 <span class="ot">&lt;-</span> <span class="sc">!</span><span class="fu">str_detect</span>(palabras, <span class="st">"[aáeéiíoóuúúü]"</span>)</span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Encuentra todas las palabras consistentes solo en consonantes (no vocales)</span></span>
<span id="cb100-4"><a href="#cb100-4" aria-hidden="true" tabindex="-1"></a>sin_vocales_2 <span class="ot">&lt;-</span> <span class="fu">str_detect</span>(palabras, <span class="st">"^[^aáeéiíoóuúúü]+$"</span>)</span>
<span id="cb100-5"><a href="#cb100-5" aria-hidden="true" tabindex="-1"></a><span class="fu">identical</span>(sin_vocales_1, sin_vocales_2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<p>Los resultados son idénticos; sin embargo, creemos que la primera aproximación es significativamente más fácil de entender. Si tu expresión regular se vuelve extremadamente compleja, trata de dividirla en partes más pequeñas, dale un nombre a cada parte y luego combínalas en operaciones lógicas.</p>
<p>Un uso común de <code>str_detect()</code> es para seleccionar elementos que coincidan con un patrón. Puedes hacer eso con subdivisiones lógicas o utilizando <code>str_subset()</code>, que es un “envoltorio” (<em>wrapper</em>) de esas operaciones.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a>palabras[<span class="fu">str_detect</span>(palabras, <span class="st">"x$"</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "ex"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_subset</span>(palabras, <span class="st">"x$"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "ex"</code></pre>
</div>
</div>
<p>En todo caso, lo más habitual es que tus cadenas de caracteres sean una columna de un <em>data frame</em> y que prefieras utilizar la función <code>filter()</code> (<em>filtrar</em>):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">palabra =</span> palabras, </span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">i =</span> <span class="fu">seq_along</span>(palabra)</span>
<span id="cb106-4"><a href="#cb106-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb106-5"><a href="#cb106-5" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb106-6"><a href="#cb106-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(palabras, <span class="st">"x$"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
  palabra     i
  &lt;chr&gt;   &lt;int&gt;
1 ex        338</code></pre>
</div>
</div>
<p>Una varación de <code>str_detect()</code> es <code>str_count()</code> (<em>count</em> = contar): más que un simple sí o no, te indica cuántas coincidencias hay en una cadena:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"manzana"</span>, <span class="st">"plátano"</span>, <span class="st">"pera"</span>)</span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_count</span>(x, <span class="st">"a"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3 1 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="co"># En promedio, ¿cuántas vocales hay por palabra?</span></span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(<span class="fu">str_count</span>(palabras, <span class="st">"[aáeéiíoóuúü]"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2.72</code></pre>
</div>
</div>
<p>Es natural usar <code>str_count()</code> junto con <code>mutate()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb112-3"><a href="#cb112-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">vocales =</span> <span class="fu">str_count</span>(palabra, <span class="st">"[aáeéiíoóuúü]"</span>),</span>
<span id="cb112-4"><a href="#cb112-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">consonantes =</span> <span class="fu">str_count</span>(palabra, <span class="st">"[^aáeéiíoóuúü]"</span>)</span>
<span id="cb112-5"><a href="#cb112-5" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,000 × 4
   palabra         i vocales consonantes
   &lt;chr&gt;       &lt;int&gt;   &lt;int&gt;       &lt;int&gt;
 1 a               1       1           0
 2 abril           2       2           3
 3 acción          3       3           3
 4 acciones        4       4           4
 5 acerca          5       3           3
 6 actitud         6       3           4
 7 actividad       7       4           5
 8 actividades     8       5           6
 9 acto            9       2           2
10 actual         10       3           3
# ℹ 990 more rows</code></pre>
</div>
</div>
<p>Ten en cuenta que las coincidencias nunca se superponen. Por ejemplo, en <code>"abababa"</code>, ¿cuántas veces se encontrará una coincidencia con el patrón <code>"aba"</code>? Las expresiones regulares dicen que dos, no tres:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_count</span>(<span class="st">"abababa"</span>, <span class="st">"aba"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view_all</span>(<span class="st">"abababa"</span>, <span class="st">"aba"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: `str_view()` was deprecated in stringr 1.5.0.
ℹ Please use `str_view_all()` instead.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ &lt;aba&gt;b&lt;aba&gt;</code></pre>
</div>
</div>
<p>Toma nota sobre el uso de <code>str_view_all()</code>. Como aprenderás dentro de poco, muchas funciones de <strong>stringr</strong> vienen en pares: una función trabaja con una sola coincidencia y la otra con todas. La segunda función tendrá el sufijo <code>_all</code> (<em>todas</em>).</p>
</section>
<section id="ejercicios-6" class="level3" data-number="14.3.2">
<h3 data-number="14.3.2" class="anchored" data-anchor-id="ejercicios-6"><span class="header-section-number">14.3.2</span> Ejercicios</h3>
<ol type="1">
<li><p>Para cada uno de los siguientes desafíos, intenta buscar una solución utilizando tanto una expresión regular simple como una combinación de múltiples llamadas a <code>str_detect()</code>.</p>
<ol type="1">
<li><p>Encuentra todas las palabras que empiezan o terminan con <code>y</code>.</p></li>
<li><p>Encuentra todas las palabras que empiezan con una vocal y terminan con una consonante.</p></li>
<li><p>¿Existen palabras que tengan todas las vocales?</p></li>
</ol></li>
<li><p>¿Qué palabra tiene el mayor número de vocales? ¿Qué palabra tiene la mayor proporción de vocales? (Pista: ¿cuál es el denominador?)</p></li>
</ol>
</section>
<section id="extraer-coincidencias" class="level3" data-number="14.3.3">
<h3 data-number="14.3.3" class="anchored" data-anchor-id="extraer-coincidencias"><span class="header-section-number">14.3.3</span> Extraer coincidencias</h3>
<p>Para extraer el texto de una coincidencia utiliza <code>str_extract()</code>. Para mostrar cómo funciona, necesitaremos un ejemplo más complicado. Para ello, usaremos una selección y adaptación al español de las oraciones disponibles originalmente en <code>stringr::sentences</code> y que puedes encontrar en <code>datos::oraciones</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(oraciones)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 50</code></pre>
</div>
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(oraciones)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Las casas están construidas de ladrillos de arcilla roja."
[2] "La caja fue arrojada al lado del camión estacionado."     
[3] "El domingo es la mejor parte de la semana."               
[4] "Agrega a la cuenta de la tienda hasta el último centavo." 
[5] "Nueve hombres fueron contratados para excavar las ruinas."
[6] "Pega la hoja en el fondo azul oscuro."                    </code></pre>
</div>
</div>
<p>Imagina que quieres encontrar todas las oraciones que tengan el nombre de un color. Primero, creamos un vector con nombres de colores y luego lo convertimos en una sola expresión regular:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a>colores <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"rojo"</span>, <span class="st">"amarillo"</span>, <span class="st">"verde"</span>, <span class="st">"azul"</span>, <span class="st">"marrón"</span>)</span>
<span id="cb123-2"><a href="#cb123-2" aria-hidden="true" tabindex="-1"></a>coincidencia_color <span class="ot">&lt;-</span> <span class="fu">str_c</span>(colores, <span class="at">collapse =</span> <span class="st">"|"</span>)</span>
<span id="cb123-3"><a href="#cb123-3" aria-hidden="true" tabindex="-1"></a>coincidencia_color</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "rojo|amarillo|verde|azul|marrón"</code></pre>
</div>
</div>
<p>Ahora, podemos seleccionar las oraciones que contienen un color y extraer luego el color para saber de cuál se trata:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a>tiene_color <span class="ot">&lt;-</span> <span class="fu">str_subset</span>(oraciones, coincidencia_color)</span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a>coincidencia <span class="ot">&lt;-</span> <span class="fu">str_extract</span>(tiene_color, coincidencia_color)</span>
<span id="cb125-3"><a href="#cb125-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(coincidencia)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "azul"   "azul"   "rojo"   "azul"   "azul"   "marrón"</code></pre>
</div>
</div>
<p>Ten en cuenta que <code>str_extract()</code> solo extrae la primera coincidencia. Podemos ver eso de manera sencilla seleccionando primero todas las oraciones que tengan más de una coincidencia:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a>mas <span class="ot">&lt;-</span> oraciones[<span class="fu">str_count</span>(oraciones, coincidencia_color) <span class="sc">&gt;</span> <span class="dv">1</span>]</span>
<span id="cb127-2"><a href="#cb127-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view_all</span>(mas, coincidencia_color)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ Instalaron &lt;azul&gt;ejos &lt;verde&gt;s en la cocina.
[2] │ Si ar&lt;rojo&gt; la taza &lt;azul&gt; al suelo se romperá.
[3] │ Las hojas se vuelven de color &lt;marrón&gt; y &lt;amarillo&gt; en el otoño.
[4] │ La luz &lt;verde&gt; en la caja &lt;marrón&gt; parpadeaba.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_extract</span>(mas, coincidencia_color)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "azul"   "rojo"   "marrón" "verde" </code></pre>
</div>
</div>
<p>Este es un patrón de coincidencia común para las funciones de <strong>stringr</strong>, ya que trabajar con una sola coincidencia te permite utilizar estructuras de datos más simples. Para obtener todas las coincidencias, utiliza <code>str_extract_all()</code>. Esta función devuelve una lista:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_extract_all</span>(mas, coincidencia_color)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] "azul"  "verde"

[[2]]
[1] "rojo" "azul"

[[3]]
[1] "marrón"   "amarillo"

[[4]]
[1] "verde"  "marrón"</code></pre>
</div>
</div>
<p>Aprenderás más sobre listas en el capítulo sobre [vectores] y en el sobre [iteración].</p>
<p>Si utilizas <code>simplify = TRUE</code> (es decir, <em>simplificar</em> = VERDADERO), <code>str_extract_all()</code> devolverá una matriz con las coincidencias más cortas expandidas hasta el largo de las más extensas:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb133"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_extract_all</span>(mas, coincidencia_color, <span class="at">simplify =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1]     [,2]      
[1,] "azul"   "verde"   
[2,] "rojo"   "azul"    
[3,] "marrón" "amarillo"
[4,] "verde"  "marrón"  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb135"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"a b"</span>, <span class="st">"a b c"</span>)</span>
<span id="cb135-2"><a href="#cb135-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_extract_all</span>(x, <span class="st">"[a-z]"</span>, <span class="at">simplify =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3]
[1,] "a"  ""   ""  
[2,] "a"  "b"  ""  
[3,] "a"  "b"  "c" </code></pre>
</div>
</div>
<section id="ejercicios-7" class="level4" data-number="14.3.3.1">
<h4 data-number="14.3.3.1" class="anchored" data-anchor-id="ejercicios-7"><span class="header-section-number">14.3.3.1</span> Ejercicios</h4>
<ol type="1">
<li><p>Te habrás dado cuenta que en el ejemplo anterior la expresión regular que utilizamos también devolvió como resultado “arrojo” y “azulejos”, que no son nombres de colores. Modifica la expresión regular para resolver ese problema.</p></li>
<li><p>De <code>datos::oraciones</code> extrae:</p>
<ol type="1">
<li>La primera palabra de cada oración.</li>
<li>Todas las palabras que terminen en <code>ción</code>.</li>
<li>Todos los plurales.</li>
</ol></li>
</ol>
</section>
</section>
<section id="coincidencias-agrupadas" class="level3" data-number="14.3.4">
<h3 data-number="14.3.4" class="anchored" data-anchor-id="coincidencias-agrupadas"><span class="header-section-number">14.3.4</span> Coincidencias agrupadas</h3>
<p>Antes en este capítulo hablamos sobre el uso de paréntesis para aclarar la <em>precedencia</em> y las <em>referencias previas</em> al buscar coincidencias. También puedes utilizar los paréntesis para extraer una coincidencia compleja. Por ejemplo, imagina que quieres extraer los sustantivos de una oración. Como heurística, buscaremos cualquier palabra que venga después de un artículo (<em>el</em>, <em>la</em>, <em>un</em>, <em>una</em>, etc.). Definir qué es una palabra en una expresión regular es un poco complicado, así que aquí utilizaremos una aproximación simple: una secuencia de al menos un caracter que no sea un espacio.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb137"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a>sustantivo <span class="ot">&lt;-</span> <span class="st">"(el|la|los|las|lo|un|una|unos|unas) ([^ ]+)"</span></span>
<span id="cb137-2"><a href="#cb137-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-3"><a href="#cb137-3" aria-hidden="true" tabindex="-1"></a>tiene_sustantivo <span class="ot">&lt;-</span> oraciones <span class="sc">%&gt;%</span></span>
<span id="cb137-4"><a href="#cb137-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_subset</span>(sustantivo) <span class="sc">%&gt;%</span></span>
<span id="cb137-5"><a href="#cb137-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span>
<span id="cb137-6"><a href="#cb137-6" aria-hidden="true" tabindex="-1"></a>tiene_sustantivo <span class="sc">%&gt;%</span> </span>
<span id="cb137-7"><a href="#cb137-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_extract</span>(sustantivo)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "los de"      "el camión"   "la mejor"    "la cuenta"   "las ruinas."
 [6] "la hoja"     "la cocina."  "la taza"     "el tanque."  "el calor"   </code></pre>
</div>
</div>
<p><code>str_extract()</code> nos devuelve la coincidencia completa; <code>str_match()</code> nos entrega cada componente. En vez de un vector de caracteres, devuelve una matriz con una columna para la coincidencia completa y una columna para cada grupo:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb139"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a>tiene_sustantivo <span class="sc">%&gt;%</span> </span>
<span id="cb139-2"><a href="#cb139-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_match</span>(sustantivo)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      [,1]          [,2]  [,3]     
 [1,] "los de"      "los" "de"     
 [2,] "el camión"   "el"  "camión" 
 [3,] "la mejor"    "la"  "mejor"  
 [4,] "la cuenta"   "la"  "cuenta" 
 [5,] "las ruinas." "las" "ruinas."
 [6,] "la hoja"     "la"  "hoja"   
 [7,] "la cocina."  "la"  "cocina."
 [8,] "la taza"     "la"  "taza"   
 [9,] "el tanque."  "el"  "tanque."
[10,] "el calor"    "el"  "calor"  </code></pre>
</div>
</div>
<p>(Como era de esperarse, nuestra heurística para detectar sustantivos es pobre, ya que también selecciona adjetivos como “mejor” y preposiciones como “de”).</p>
<p>Si tus datos están en un tibble, suele ser más fácil utilizar <code>tidyr::extract()</code>. Funciona como <code>str_match()</code> pero requiere ponerle un nombre a las coincidencias, las que luego son puestas en columnas nuevas:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb141"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">oracion =</span> oraciones) <span class="sc">%&gt;%</span> </span>
<span id="cb141-2"><a href="#cb141-2" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">extract</span>(</span>
<span id="cb141-3"><a href="#cb141-3" aria-hidden="true" tabindex="-1"></a>    oracion, <span class="fu">c</span>(<span class="st">"articulo"</span>, <span class="st">"sustantivo"</span>), <span class="st">"(el|la|los|las|un|una|unos|unas) ([^ ]+)"</span>, </span>
<span id="cb141-4"><a href="#cb141-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove =</span> <span class="cn">FALSE</span></span>
<span id="cb141-5"><a href="#cb141-5" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 50 × 3
   oracion                                                   articulo sustantivo
   &lt;chr&gt;                                                     &lt;chr&gt;    &lt;chr&gt;     
 1 Las casas están construidas de ladrillos de arcilla roja. los      de        
 2 La caja fue arrojada al lado del camión estacionado.      el       camión    
 3 El domingo es la mejor parte de la semana.                la       mejor     
 4 Agrega a la cuenta de la tienda hasta el último centavo.  la       cuenta    
 5 Nueve hombres fueron contratados para excavar las ruinas. las      ruinas.   
 6 Pega la hoja en el fondo azul oscuro.                     la       hoja      
 7 Instalaron azulejos verdes en la cocina.                  la       cocina.   
 8 Si arrojo la taza azul al suelo se romperá.               la       taza      
 9 Dos peces azules nadaban en el tanque.                    el       tanque.   
10 El ancho camino brillaba bajo el calor del sol.           el       calor     
# ℹ 40 more rows</code></pre>
</div>
</div>
<p>Al igual que con <code>str_extract()</code>, si quieres todas las coincidencias para cada cadena, tienes que utilizar <code>str_match_all()</code>.</p>
<section id="ejercicios-8" class="level4" data-number="14.3.4.1">
<h4 data-number="14.3.4.1" class="anchored" data-anchor-id="ejercicios-8"><span class="header-section-number">14.3.4.1</span> Ejercicios</h4>
<ol type="1">
<li><p>Busca en <code>datos::oraciones</code> todas las palabras que vengan después de un “número”, como “un(o|a)”, “dos”, “tres”, etc. Extrae tanto el número como la palabra.</p></li>
<li><p>En español a veces se utiliza el guión para unir adjetivos, establecer relaciones entre conceptos o para unir gentilicios (p.&nbsp;ej., <em>teórico-práctico</em>, <em>precio-calidad</em>, <em>franco-porteña</em>). ¿Cómo podrías encontrar esas palabras y separar lo que viene antes y después del guión?</p></li>
</ol>
</section>
</section>
<section id="remplazar-coincidencias" class="level3" data-number="14.3.5">
<h3 data-number="14.3.5" class="anchored" data-anchor-id="remplazar-coincidencias"><span class="header-section-number">14.3.5</span> Remplazar coincidencias</h3>
<p><code>str_replace()</code> y <code>str_replace_all()</code> te permiten remplazar coincidencias en una nueva cadena. Su uso más simple es para remplazar un patrón con una cadena fija:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb143"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"manzana"</span>, <span class="st">"pera"</span>, <span class="st">"banana"</span>)</span>
<span id="cb143-2"><a href="#cb143-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace</span>(x, <span class="st">"[aeiou]"</span>, <span class="st">"-"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "m-nzana" "p-ra"    "b-nana" </code></pre>
</div>
<div class="sourceCode cell-code" id="cb145"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace_all</span>(x, <span class="st">"[aeiou]"</span>, <span class="st">"-"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "m-nz-n-" "p-r-"    "b-n-n-" </code></pre>
</div>
</div>
<p>Con <code>str_replace_all()</code> puedes realizar múltiples remplazos a través de un vector cuyos elementos tiene nombre (<em>named vector</em>):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb147"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"1 casa"</span>, <span class="st">"2 autos"</span>, <span class="st">"3 personas"</span>)</span>
<span id="cb147-2"><a href="#cb147-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace_all</span>(x, <span class="fu">c</span>(<span class="st">"1"</span> <span class="ot">=</span> <span class="st">"una"</span>, <span class="st">"2"</span> <span class="ot">=</span> <span class="st">"dos"</span>, <span class="st">"3"</span> <span class="ot">=</span> <span class="st">"tres"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "una casa"      "dos autos"     "tres personas"</code></pre>
</div>
</div>
<p>En vez de hacer remplazos con una cadena fija, puedes utilizar <em>referencias previas</em> para insertar componentes de la coincidencia. En el siguiente código invertimos el orden de la segunda y la tercera palabra:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb149"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a>oraciones <span class="sc">%&gt;%</span> </span>
<span id="cb149-2"><a href="#cb149-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace</span>(<span class="st">"([^ ]+) ([^ ]+) ([^ ]+)"</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">1 </span><span class="sc">\\</span><span class="st">3 </span><span class="sc">\\</span><span class="st">2"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb149-3"><a href="#cb149-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Las están casas construidas de ladrillos de arcilla roja."
[2] "La fue caja arrojada al lado del camión estacionado."     
[3] "El es domingo la mejor parte de la semana."               
[4] "Agrega la a cuenta de la tienda hasta el último centavo." 
[5] "Nueve fueron hombres contratados para excavar las ruinas."</code></pre>
</div>
</div>
<section id="ejercicios-9" class="level4" data-number="14.3.5.1">
<h4 data-number="14.3.5.1" class="anchored" data-anchor-id="ejercicios-9"><span class="header-section-number">14.3.5.1</span> Ejercicios</h4>
<ol type="1">
<li><p>Remplaza en una cadena todas las barras por barras invertidas.</p></li>
<li><p>Implementa una versón simple de <code>str_to_lower()</code> (<em>a minúsculas</em>) usando <code>replace_all()</code>.</p></li>
<li><p>Cambia la primera y la última letra en <code>palabras</code>. ¿Cuáles de esas cadenas siguen siendo palabras?</p></li>
</ol>
</section>
</section>
<section id="divisiones" class="level3" data-number="14.3.6">
<h3 data-number="14.3.6" class="anchored" data-anchor-id="divisiones"><span class="header-section-number">14.3.6</span> Divisiones</h3>
<p>Usa <code>str_split()</code> para dividir una cadena en partes. Por ejemplo, podemos dividir <code>oraciones</code> en palabras:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb151"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a>oraciones <span class="sc">%&gt;%</span></span>
<span id="cb151-2"><a href="#cb151-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">5</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb151-3"><a href="#cb151-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_split</span>(<span class="st">" "</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] "Las"         "casas"       "están"       "construidas" "de"         
[6] "ladrillos"   "de"          "arcilla"     "roja."      

[[2]]
[1] "La"           "caja"         "fue"          "arrojada"     "al"          
[6] "lado"         "del"          "camión"       "estacionado."

[[3]]
[1] "El"      "domingo" "es"      "la"      "mejor"   "parte"   "de"     
[8] "la"      "semana."

[[4]]
 [1] "Agrega"   "a"        "la"       "cuenta"   "de"       "la"      
 [7] "tienda"   "hasta"    "el"       "último"   "centavo."

[[5]]
[1] "Nueve"       "hombres"     "fueron"      "contratados" "para"       
[6] "excavar"     "las"         "ruinas."    </code></pre>
</div>
</div>
<p>Como cada componente podría tener un número diferente de elementos, esto devuelve una lista. Si estás trabajando con vectores de extensión 1, lo más fácil es extraer el primer elemento de la lista:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb153"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="st">"a|b|c|d"</span> <span class="sc">%&gt;%</span> </span>
<span id="cb153-2"><a href="#cb153-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_split</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">|"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb153-3"><a href="#cb153-3" aria-hidden="true" tabindex="-1"></a>  .[[<span class="dv">1</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "a" "b" "c" "d"</code></pre>
</div>
</div>
<p>Otra opción es, al igual que con otras funciones de <strong>stringr</strong> que devuelven una lista, utilizar <code>simplify = TRUE</code> para obtener una matriz:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb155"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a>oraciones <span class="sc">%&gt;%</span></span>
<span id="cb155-2"><a href="#cb155-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">5</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb155-3"><a href="#cb155-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_split</span>(<span class="st">" "</span>, <span class="at">simplify =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1]     [,2]      [,3]     [,4]          [,5]    [,6]        [,7]    
[1,] "Las"    "casas"   "están"  "construidas" "de"    "ladrillos" "de"    
[2,] "La"     "caja"    "fue"    "arrojada"    "al"    "lado"      "del"   
[3,] "El"     "domingo" "es"     "la"          "mejor" "parte"     "de"    
[4,] "Agrega" "a"       "la"     "cuenta"      "de"    "la"        "tienda"
[5,] "Nueve"  "hombres" "fueron" "contratados" "para"  "excavar"   "las"   
     [,8]      [,9]           [,10]    [,11]     
[1,] "arcilla" "roja."        ""       ""        
[2,] "camión"  "estacionado." ""       ""        
[3,] "la"      "semana."      ""       ""        
[4,] "hasta"   "el"           "último" "centavo."
[5,] "ruinas." ""             ""       ""        </code></pre>
</div>
</div>
<p>También puedes indicar un número máximo de elementos:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb157"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a>campos <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Nombre: Hadley"</span>, <span class="st">"País: NZ"</span>, <span class="st">"Edad: 35"</span>)</span>
<span id="cb157-2"><a href="#cb157-2" aria-hidden="true" tabindex="-1"></a>campos <span class="sc">%&gt;%</span> <span class="fu">str_split</span>(<span class="st">": "</span>, <span class="at">n =</span> <span class="dv">2</span>, <span class="at">simplify =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1]     [,2]    
[1,] "Nombre" "Hadley"
[2,] "País"   "NZ"    
[3,] "Edad"   "35"    </code></pre>
</div>
</div>
<p>En vez de dividir una cadena según patrones, puedes hacerlo según caracter, línea, oración o palabra. Para ello, puedes utilizar la función <code>boundary()</code> (<em>límite</em>). En el siguiente ejemplo la división se hace por palabra (<em>word</em>):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb159"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="st">"Esta es una oración. Esta es otra oración."</span></span>
<span id="cb159-2"><a href="#cb159-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view_all</span>(x, <span class="fu">boundary</span>(<span class="st">"word"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ &lt;Esta&gt; &lt;es&gt; &lt;una&gt; &lt;oración&gt;. &lt;Esta&gt; &lt;es&gt; &lt;otra&gt; &lt;oración&gt;.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb161"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_split</span>(x, <span class="st">" "</span>)[[<span class="dv">1</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Esta"     "es"       "una"      "oración." "Esta"     "es"       "otra"    
[8] "oración."</code></pre>
</div>
<div class="sourceCode cell-code" id="cb163"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_split</span>(x, <span class="fu">boundary</span>(<span class="st">"word"</span>))[[<span class="dv">1</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Esta"    "es"      "una"     "oración" "Esta"    "es"      "otra"   
[8] "oración"</code></pre>
</div>
</div>
<section id="ejercicios-10" class="level4" data-number="14.3.6.1">
<h4 data-number="14.3.6.1" class="anchored" data-anchor-id="ejercicios-10"><span class="header-section-number">14.3.6.1</span> Ejercicios</h4>
<ol type="1">
<li><p>Divide una cadena como <code>"manzanas, peras y bananas"</code> en elementos individuales.</p></li>
<li><p>¿Por qué es mejor dividir utilizando <code>boundary("word")</code> en vez de <code>" "</code>?</p></li>
<li><p>¿Qué pasa si dividimos con una cadena vacía (<code>""</code>)? Experimenta y luego lee la documentación</p></li>
</ol>
</section>
</section>
<section id="buscar-coincidencias" class="level3" data-number="14.3.7">
<h3 data-number="14.3.7" class="anchored" data-anchor-id="buscar-coincidencias"><span class="header-section-number">14.3.7</span> Buscar coincidencias</h3>
<p><code>str_locate()</code> y <code>str_locate_all()</code> te indican la posición inicial y final de una coincidencia. Son particularmente útiles cuando ninguna otra función hace exactamente lo que quieres. Puedes utilizar <code>str_locate()</code> para encontrar los patrones de coincidencia y <code>str_sub()</code> para extraerlos y/o modificarlos.</p>
</section>
</section>
<section id="otro-tipo-de-patrones" class="level2" data-number="14.4">
<h2 data-number="14.4" class="anchored" data-anchor-id="otro-tipo-de-patrones"><span class="header-section-number">14.4</span> Otro tipo de patrones</h2>
<p>Cuando utilizas un patrón que es una cadena, este automáticamente es encapsulado en la función <code>regex()</code> (<em>regex</em> es la forma abreviada de <em>regular expression</em>, es decir, expresión regular):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb165"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a><span class="co"># La manera regular en que escribimos el patrón</span></span>
<span id="cb165-2"><a href="#cb165-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(frutas, <span class="st">"nana"</span>)</span>
<span id="cb165-3"><a href="#cb165-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Es un atajo de</span></span>
<span id="cb165-4"><a href="#cb165-4" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(frutas, <span class="fu">regex</span>(<span class="st">"nana"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Puedes utilizar los otros argumentos de <code>regex()</code> para controlar los detalles de la coincidencia:</p>
<ul>
<li><p><code>ignore_case = TRUE</code> permite que la búsqueda coincida tanto con caracteres en mayúscula como en minúscula. Este argumento siempre utiliza los parámetros de tu <em>locale</em>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb166"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb166-1"><a href="#cb166-1" aria-hidden="true" tabindex="-1"></a>bananas <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"banana"</span>, <span class="st">"Banana"</span>, <span class="st">"BANANA"</span>)</span>
<span id="cb166-2"><a href="#cb166-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(bananas, <span class="st">"banana"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ &lt;banana&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb168"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb168-1"><a href="#cb168-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(bananas, <span class="fu">regex</span>(<span class="st">"banana"</span>, <span class="at">ignore_case =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ &lt;banana&gt;
[2] │ &lt;Banana&gt;
[3] │ &lt;BANANA&gt;</code></pre>
</div>
</div></li>
<li><p><code>multiline = TRUE</code> permite que <code>^</code> y <code>$</code> coincidan con el inicio y fin de cada línea, en vez del inicio y fin de la cadena completa.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb170"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb170-1"><a href="#cb170-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="st">"Línea 1</span><span class="sc">\n</span><span class="st">Línea 2</span><span class="sc">\n</span><span class="st">Línea 3"</span></span>
<span id="cb170-2"><a href="#cb170-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_extract_all</span>(x, <span class="st">"^Línea"</span>)[[<span class="dv">1</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Línea"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb172"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb172-1"><a href="#cb172-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_extract_all</span>(x, <span class="fu">regex</span>(<span class="st">"^Línea"</span>, <span class="at">multiline =</span> <span class="cn">TRUE</span>))[[<span class="dv">1</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Línea" "Línea" "Línea"</code></pre>
</div>
</div></li>
<li><p><code>comments = TRUE</code> te permite utilizar comentarios y espacios en blanco para hacer más entendibles las expresiones regulares complejas. Los espacios son ignorados, al igual que todo lo que está después de <code>#</code>. Para coincidir un espacio de manera literal, tendrías que “escaparlo: <code>"\\ "</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb174"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb174-1"><a href="#cb174-1" aria-hidden="true" tabindex="-1"></a>telefono <span class="ot">&lt;-</span> <span class="fu">regex</span>(<span class="st">"</span></span>
<span id="cb174-2"><a href="#cb174-2" aria-hidden="true" tabindex="-1"></a><span class="st">  </span><span class="sc">\\</span><span class="st">(?     # paréntesis inicial opcional</span></span>
<span id="cb174-3"><a href="#cb174-3" aria-hidden="true" tabindex="-1"></a><span class="st">  (</span><span class="sc">\\</span><span class="st">d{3}) # código de área</span></span>
<span id="cb174-4"><a href="#cb174-4" aria-hidden="true" tabindex="-1"></a><span class="st">  [) -]?   # paréntesis, espacio o guión inicial opcional</span></span>
<span id="cb174-5"><a href="#cb174-5" aria-hidden="true" tabindex="-1"></a><span class="st">  (</span><span class="sc">\\</span><span class="st">d{3}) # otros tres números</span></span>
<span id="cb174-6"><a href="#cb174-6" aria-hidden="true" tabindex="-1"></a><span class="st">  [ -]?    # espacio o guión opcional</span></span>
<span id="cb174-7"><a href="#cb174-7" aria-hidden="true" tabindex="-1"></a><span class="st">  (</span><span class="sc">\\</span><span class="st">d{3}) # otros tres números</span></span>
<span id="cb174-8"><a href="#cb174-8" aria-hidden="true" tabindex="-1"></a><span class="st">  "</span>, <span class="at">comments =</span> <span class="cn">TRUE</span>)</span>
<span id="cb174-9"><a href="#cb174-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb174-10"><a href="#cb174-10" aria-hidden="true" tabindex="-1"></a><span class="fu">str_match</span>(<span class="st">"514-791-8141"</span>, telefono)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1]          [,2]  [,3]  [,4] 
[1,] "514-791-814" "514" "791" "814"</code></pre>
</div>
</div></li>
<li><p><code>dotall = TRUE</code> permite que <code>.</code> coincida con todo, incluidos los saltos de línea (<code>\n</code>).</p></li>
</ul>
<p>Existen otras tres funciones que puedes utilizar en vez de <code>regex()</code>:</p>
<ul>
<li><p><code>fixed()</code>: busca una coincidencia exacta de la secuencia de bytes especificada. Ignora todas las expresiones regulares especiales y opera a un nivel muy bajo. Esto te permite evitar formas de “escapado” complejas y puede ser mucho más rápida que las expresiones regulares. La comparación utilizando <code>microbenchmark</code> muestra que <code>fixed()</code> es casi dos veces más rápida.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb176"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb176-1"><a href="#cb176-1" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages(microbenchmark)</span></span>
<span id="cb176-2"><a href="#cb176-2" aria-hidden="true" tabindex="-1"></a>microbenchmark<span class="sc">::</span><span class="fu">microbenchmark</span>(</span>
<span id="cb176-3"><a href="#cb176-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">fixed =</span> <span class="fu">str_detect</span>(oraciones, <span class="fu">fixed</span>(<span class="st">"la"</span>)),</span>
<span id="cb176-4"><a href="#cb176-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">regex =</span> <span class="fu">str_detect</span>(oraciones, <span class="st">"la"</span>),</span>
<span id="cb176-5"><a href="#cb176-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">times =</span> <span class="dv">20</span></span>
<span id="cb176-6"><a href="#cb176-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Unit: microseconds
  expr  min   lq   mean median   uq   max neval
 fixed 40.1 43.4 63.595   45.1 50.8 365.3    20
 regex 46.8 47.7 54.290   48.9 53.0 122.2    20</code></pre>
</div>
</div>
<p>IMPORTANTE: ten precaución al utilizar <code>fixed()</code> con datos que no estén en inglés. Puede causar problemas porque muchas veces existen múltiples formas de representar un mismo caracter. Por ejemplo, hay dos formas de difinir “á”: como un solo caracter o como una “a” con un acento:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb178"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb178-1"><a href="#cb178-1" aria-hidden="true" tabindex="-1"></a>a1 <span class="ot">&lt;-</span> <span class="st">"\u00e1"</span></span>
<span id="cb178-2"><a href="#cb178-2" aria-hidden="true" tabindex="-1"></a>a2 <span class="ot">&lt;-</span> <span class="st">"a\u0301"</span></span>
<span id="cb178-3"><a href="#cb178-3" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(a1, a2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "á" "á"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb180"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb180-1"><a href="#cb180-1" aria-hidden="true" tabindex="-1"></a>a1 <span class="sc">==</span> a2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
<p>Ambas se <em>renderean</em> de manera idéntica, pero como están definidas de manera distinta, <code>fixed()</code> no encuentra una coincidencia. En su lugar, puedes utilizar <code>coll()</code>, que definiremos a continuación, ya que respeta las reglas humanas de comparación de caracteres:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb182"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb182-1"><a href="#cb182-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(a1, <span class="fu">fixed</span>(a2))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb184"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb184-1"><a href="#cb184-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(a1, <span class="fu">coll</span>(a2))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div></li>
<li><p><code>coll()</code>: compara cadenas usando reglas de secuenciación (<em>collation</em>) estándar. Esto es útil para buscar coincidencias que sean insensibles a mayúsculas y minúsculas. Ten en cuenta que <code>coll()</code> incluye un parámetro para el <em>locale</em>, Lamentablemente, se utilizan diferentes reglas en diferentes partes del mundo.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb186"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb186-1"><a href="#cb186-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Esto quiere decir que también tienes que prestar atención a esas </span></span>
<span id="cb186-2"><a href="#cb186-2" aria-hidden="true" tabindex="-1"></a><span class="co"># diferencias al buscar coincidencias insensibles a mayúsculas y</span></span>
<span id="cb186-3"><a href="#cb186-3" aria-hidden="true" tabindex="-1"></a><span class="co"># minúsculas</span></span>
<span id="cb186-4"><a href="#cb186-4" aria-hidden="true" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"I"</span>, <span class="st">"İ"</span>, <span class="st">"i"</span>, <span class="st">"ı"</span>)</span>
<span id="cb186-5"><a href="#cb186-5" aria-hidden="true" tabindex="-1"></a>i</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "I" "İ" "i" "ı"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb188"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb188-1"><a href="#cb188-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_subset</span>(i, <span class="fu">coll</span>(<span class="st">"i"</span>, <span class="at">ignore_case =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "I" "i"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb190"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb190-1"><a href="#cb190-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_subset</span>(i, <span class="fu">coll</span>(<span class="st">"i"</span>, <span class="at">ignore_case =</span> <span class="cn">TRUE</span>, <span class="at">locale =</span> <span class="st">"tr"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "İ" "i"</code></pre>
</div>
</div>
<p>Tanto <code>fixed()</code> como <code>regex()</code> tienen argumentos para ignorar la diferencia entre mayúsculas y minúsculas (<code>ignore_case</code>); sin embargo, no te permiten elegir tu <em>locale</em>: siempre utilizan el que está definido por defecto. Puedes ver cuál se está usando con el siguiente código. Pronto hablaremos más sobre el paquete <strong>stringi</strong>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb192"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb192-1"><a href="#cb192-1" aria-hidden="true" tabindex="-1"></a>stringi<span class="sc">::</span><span class="fu">stri_locale_info</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$Language
[1] "c"

$Country
[1] ""

$Variant
[1] ""

$Name
[1] "c"</code></pre>
</div>
</div>
<p>Una desventaja de <code>coll()</code> es la velocidad. Debido a que las reglas para reconocer qué caracteres son iguales suelen ser complicadas, <code>coll()</code> es relativamente más lenta al compararla con <code>regex()</code> y <code>fixed()</code>.</p></li>
<li><p>Como viste con <code>str_split()</code>, puedes utilizar <code>boundary()</code> para coincidir límites. También puedes utilizarla con otras funciones:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb194"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb194-1"><a href="#cb194-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="st">"Esta es una oración."</span></span>
<span id="cb194-2"><a href="#cb194-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view_all</span>(x, <span class="fu">boundary</span>(<span class="st">"word"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ &lt;Esta&gt; &lt;es&gt; &lt;una&gt; &lt;oración&gt;.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb196"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb196-1"><a href="#cb196-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_extract_all</span>(x, <span class="fu">boundary</span>(<span class="st">"word"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] "Esta"    "es"      "una"     "oración"</code></pre>
</div>
</div></li>
</ul>
<section id="ejercicios-11" class="level3" data-number="14.4.1">
<h3 data-number="14.4.1" class="anchored" data-anchor-id="ejercicios-11"><span class="header-section-number">14.4.1</span> Ejercicios</h3>
<ol type="1">
<li><p>¿Cómo buscarías todas las cadenas que contienen <code>\</code> con <code>regex()</code> vs. con <code>fixed()</code>?</p></li>
<li><p>¿Cuáles son las cinco palabras más comunes en <code>oraciones</code>?</p></li>
</ol>
</section>
</section>
<section id="otros-usos-de-las-expresiones-regulares." class="level2" data-number="14.5">
<h2 data-number="14.5" class="anchored" data-anchor-id="otros-usos-de-las-expresiones-regulares."><span class="header-section-number">14.5</span> Otros usos de las expresiones regulares.</h2>
<p>Existen dos funciones útiles en R base que también utilizan expresiones regulares:</p>
<ul>
<li><p><code>apropos()</code> busca todos los objetos disponibles en el ambiente global (<em>global environment</em>). Esto es útil si no recuerdas bien el nombre de una función.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb198"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb198-1"><a href="#cb198-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apropos</span>(<span class="st">"replace"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "%+replace%"       "replace"          "replace_na"       "setReplaceMethod"
[5] "str_replace"      "str_replace_all"  "str_replace_na"   "theme_replace"   </code></pre>
</div>
</div></li>
<li><p><code>dir()</code> entrega una lista con todos los archivos en un directorio. El argumento <code>pattern</code> recibe una expresión regular y retorna solo los nombres de archivos que coinciden con ese patrón. Por ejemplo, puedes encontrar todos los archivos de R Markdown en el directorio actual con:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb200"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb200-1"><a href="#cb200-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">dir</span>(<span class="at">pattern =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">.Rmd$"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>character(0)</code></pre>
</div>
</div>
<p>(Si te resulta más cómodo trabajar con “globs”, es decir, especificar los nombres de archivo utilizando comodines, como en <code>*.Rmd</code>, puedes convertirlos a expresiones regulares con la función <code>glob2rx()</code>)</p></li>
</ul>
</section>
<section id="stringi" class="level2" data-number="14.6">
<h2 data-number="14.6" class="anchored" data-anchor-id="stringi"><span class="header-section-number">14.6</span> stringi</h2>
<p><strong>stringr</strong> está construido sobre la base del paquete <strong>stringi</strong>. <strong>stringr</strong> es útil cuando estás aprendiendo, ya que presenta un set mínimo de funciones, que han sido elegidas cuidadosamente para manejar las funciones de manipulación de cadenas más comunes. <strong>stringi</strong>, por su parte, está diseñado para ser comprehensivo. Contiene casi todas las funciones que podrías necesitar: <strong>stringi</strong> tiene 256 funciones, frente a las 59 de <strong>stringr</strong>.</p>
<p>Si en algún momento te encuentras en dificultades para hacer algo en <strong>stringr</strong> , vale la pena darle una mirada a <strong>stringi</strong>. Ambos paquetes funcionan de manera muy similar, por lo que deberías poder traducir tu conocimiento sobre <strong>stringr</strong> de manera natural. La principal diferencia es el prefijo: <code>str_</code> vs.&nbsp;<code>stri_</code>.</p>
<section id="ejercicios-12" class="level3" data-number="14.6.1">
<h3 data-number="14.6.1" class="anchored" data-anchor-id="ejercicios-12"><span class="header-section-number">14.6.1</span> Ejercicios</h3>
<ol type="1">
<li><p>Busca la función de <strong>stringi</strong> que:</p>
<ol type="1">
<li>Cuenta el número de palabras.</li>
<li>Busca cadenas duplicadas.</li>
<li>Genera texto aleatorio.</li>
</ol></li>
<li><p>¿Cómo puedes controlar qué lengua usa <code>stri_sort()</code> para ordenar?</p></li>
</ol>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./13-relational-data.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Datos relacionales</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./15-factors.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Factores</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>